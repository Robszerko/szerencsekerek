<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Békebeli Szerencsekerék</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Shrikhand&family=Roboto+Slab:wght@400;700&family=Great+Vibes&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-wood: #6f4e37;
            --bg-dark-wood: #3d2b1f;
            --screen-blue: #0f4c75;
            --tile-green: #1b262c;
            --font-color-light: #f4e9d8;
            --font-color-dark: #323232;
            --gold-color: #f7b733;
            --pointer-red: #d92027;
            --tile-border-color: #7D9D9C;
            --special-prize-color: #c0c0c0;
        }

        body {
            background-color: var(--bg-dark-wood);
            background-image: linear-gradient(45deg, #3a2220 25%, transparent 25%), linear-gradient(-45deg, #3a2220 25%, transparent 25%), linear-gradient(45deg, transparent 75%, #3a2220 75%), linear-gradient(-45deg, transparent 75%, #3a2220 75%);
            background-size: 20px 20px;
            font-family: 'Roboto Slab', serif;
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
            box-sizing: border-box;
            text-rendering: optimizeLegibility;
            transition: background 0.5s ease;
        }

        body.sunday-special {
            background-image: linear-gradient(45deg, #2c2c2c 25%, transparent 25%), linear-gradient(-45deg, #2c2c2c 25%, transparent 25%), linear-gradient(45deg, transparent 75%, #2c2c2c 75%), linear-gradient(-45deg, transparent 75%, #2c2c2c 75%);
            background-color: #1a1a1a;
        }

        header {
            width: 100%;
            max-width: 1400px;
            padding-bottom: 20px;
            text-align: center;
        }
        
        #logo-container {
            width: clamp(300px, 40vw, 550px);
            margin: 0 auto;
        }

        #logo-svg {
            width: 100%;
            height: auto;
            filter: drop-shadow(3px 3px 4px #000);
        }

        #sunday-title {
            display: none;
            font-family: 'Shrikhand', cursive;
            font-size: clamp(1.5rem, 4vw, 2.5rem);
            color: var(--gold-color);
            text-shadow: 2px 2px 3px #000;
            margin-top: -15px;
            margin-bottom: 10px;
        }
        body.sunday-special #sunday-title {
            display: block;
        }

        #tv-container {
            width: 100%;
            max-width: 1400px;
            background-color: #5a3825;
            background-image: 
                repeating-linear-gradient(45deg, transparent, transparent 10px, rgba(255,255,255,0.02) 10px, rgba(255,255,255,0.02) 20px),
                linear-gradient(to bottom, #5a3825, #4a2c2a);
            border: 15px solid var(--bg-dark-wood);
            border-radius: 40px;
            box-shadow: 0 0 20px rgba(0,0,0,0.7), inset 0 0 15px rgba(0,0,0,0.5);
            padding: 25px;
            box-sizing: border-box;
            display: flex;
            flex-direction: column;
        }

        #screen {
            background-color: #1f2833;
            border-radius: 20px;
            box-shadow: inset 0 0 25px rgba(0,0,0,0.9);
            width: 100%;
            padding: clamp(10px, 2vw, 20px);
            box-sizing: border-box;
            display: flex;
            flex-direction: column;
            gap: 20px;
            position: relative;
            overflow: hidden;
        }

        #screen::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: repeating-linear-gradient(rgba(0, 0, 0, 0.2) 0, rgba(0, 0, 0, 0.2) 2px, transparent 2px, transparent 4px);
            pointer-events: none;
            z-index: 1;
        }
        
        #game-area {
            display: flex;
            gap: 20px;
            flex-grow: 1;
            position: relative;
            z-index: 2;
        }

        #puzzle-section {
            flex: 3;
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            align-items: center;
            gap: 10px;
            min-width: 0;
        }

        #puzzle-category {
            background-color: rgba(0,0,0,0.3);
            color: var(--font-color-light);
            padding: 10px 20px;
            border-radius: 10px;
            font-size: clamp(1rem, 2vw, 1.5rem);
            border: 2px solid var(--gold-color);
            font-weight: 700;
            text-transform: uppercase;
            text-align: center;
            transition: all 0.3s ease;
        }
        #puzzle-category.golden {
            border-color: #FFD700;
            box-shadow: 0 0 15px #FFD700;
            color: #FFD700;
        }

        #round-info-container {
            background-color: rgba(0, 0, 0, 0.4);
            border: 1px solid var(--tile-border-color);
            border-radius: 8px;
            padding: 8px 15px;
            width: 90%;
            max-width: 500px;
            text-align: center;
            box-shadow: inset 0 0 5px rgba(0,0,0,0.5);
            display: flex;
            justify-content: space-around;
            align-items: center;
            flex-wrap: wrap;
            gap: 5px 20px;
        }
        #round-display {
            font-size: 1rem;
            font-weight: 700;
            color: var(--font-color-light);
        }
        #hour-block-display {
            font-size: 0.9rem;
            color: #ccc;
            font-style: italic;
        }

        #puzzle-board {
            display: flex;
            flex-direction: column;
            gap: 5px;
            width: 100%;
            margin-top: auto; 
            margin-bottom: auto;
        }
        .puzzle-row {
            display: flex;
            justify-content: center;
            gap: 5px;
            width: 100%;
        }
        .puzzle-tile {
            width: clamp(35px, 5.5vw, 50px);
            height: clamp(45px, 7vw, 65px);
            perspective: 1000px;
        }
        
        .tile-inner {
            position: relative;
            width: 100%;
            height: 100%;
            transition: transform 0.6s;
            transform-style: preserve-3d;
        }
        .puzzle-tile.revealed .tile-inner {
            transform: rotateY(180deg);
        }
        
        .tile-face {
            position: absolute;
            width: 100%;
            height: 100%;
            -webkit-backface-visibility: hidden;
            backface-visibility: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            border-radius: 5px;
            box-shadow: inset 0 0 5px rgba(0,0,0,0.5);
        }

        .tile-front {
            background-color: var(--tile-green);
            border: 2px solid var(--tile-border-color);
            box-shadow: inset 0 0 5px rgba(0,0,0,0.5), 0 0 4px rgba(125, 157, 156, 0.4);
        }

        .tile-back {
            background-color: var(--font-color-light);
            color: var(--font-color-dark);
            font-weight: 700;
            font-size: clamp(1.5rem, 4vw, 2.5rem);
            transform: rotateY(180deg);
            text-shadow: 1px 1px 2px var(--gold-color);
            transition: text-shadow 0.3s;
        }
        .tile-back.golden-letter-glow {
            text-shadow: 0 0 5px #fff, 0 0 10px var(--gold-color), 0 0 15px var(--gold-color);
        }
        .puzzle-tile.space {
             background-color: transparent;
             box-shadow: none;
             border: none;
        }
        .puzzle-tile.space .tile-inner {
             display: none;
        }
        .puzzle-tile.lucky-reveal .tile-back {
            animation: lucky-glow 1.5s ease-out;
        }
        @keyframes lucky-glow {
            0% { box-shadow: 0 0 5px #fff, 0 0 10px #fff, 0 0 15px var(--gold-color); }
            50% { box-shadow: 0 0 20px var(--gold-color), 0 0 30px var(--gold-color), 0 0 40px #fff2a8; transform: scale(1.1); }
            100% { box-shadow: inset 0 0 5px rgba(0,0,0,0.5); transform: scale(1); }
        }

        #alphabet-panel {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 5px;
            background-color: rgba(0,0,0,0.2);
            padding: 10px;
            border-radius: 10px;
        }
        .alphabet-key {
            width: 35px;
            height: 35px;
            font-family: 'Roboto Slab', serif;
            font-weight: 700;
            font-size: 1rem;
            border: 1px solid var(--bg-dark-wood);
            border-bottom: 3px solid var(--bg-dark-wood);
            border-right: 3px solid var(--bg-dark-wood);
            border-radius: 5px;
            cursor: pointer;
            background-color: var(--font-color-light);
            color: var(--font-color-dark);
            box-shadow: 1px 1px 3px rgba(0,0,0,0.5);
            transition: all 0.1s ease;
        }
        .alphabet-key.vowel {
            border-color: #2196f3;
            border-bottom-color: #1565c0;
            border-right-color: #1565c0;
        }
        .alphabet-key:hover:not(:disabled) {
            background-color: var(--gold-color);
        }
        .alphabet-key:active:not(:disabled) {
            transform: translateY(2px);
            border-bottom-width: 1px;
            border-right-width: 1px;
        }
        .alphabet-key:disabled {
            background-color: #616161;
            color: #bdbdbd;
            cursor: not-allowed;
            opacity: 0.7;
        }

        #game-controls-section {
            flex: 2;
            display: flex;
            flex-direction: column;
            justify-content: space-around;
            align-items: center;
            gap: 15px;
        }

        #wheel-wrapper {
            position: relative;
            width: clamp(280px, 40vh, 380px);
            aspect-ratio: 1 / 1;
        }

        #wheel-pointer {
            width: 0;
            height: 0;
            border-left: 15px solid transparent;
            border-right: 15px solid transparent;
            border-top: 30px solid var(--pointer-red);
            position: absolute;
            top: -15px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 10;
            filter: drop-shadow(2px 2px 2px rgba(0,0,0,0.5));
            border-radius: 3px;
            background: linear-gradient(to top, #c01a21, #f02e35);
            border-top: 30px solid #d92027;
            clip-path: polygon(50% 0%, 0% 100%, 100% 100%);
            box-shadow: inset 0 2px 2px rgba(255,255,255,0.4);
        }
        
        #wheel {
            width: 100%;
            height: 100%;
            transition: transform 5s cubic-bezier(0.2, 0.8, 0.25, 1);
            filter: drop-shadow(3px 3px 5px rgba(0,0,0,0.5));
            border-radius: 50%;
            box-shadow: inset 0 0 15px rgba(0,0,0,0.7);
        }

        #all-huds-container {
             display: flex;
             flex-direction: row;
             justify-content: center;
             align-items: flex-start;
             gap: 20px;
             flex-wrap: wrap;
             width: 100%;
        }

        .player-hud {
            text-align: center;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 5px;
            background: rgba(0,0,0,0.3);
            padding: 10px 20px;
            border-radius: 10px;
            border: 2px solid var(--gold-color);
        }
        .hud-label {
            font-size: clamp(1rem, 2vw, 1.2rem);
            color: var(--font-color-light);
            font-weight: 700;
            margin-bottom: 5px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        #millionaire-icon {
            display: none;
            font-size: 1.5rem;
            animation: pulse 2s infinite;
        }
        body.millionaire-active #millionaire-icon {
            display: inline-block;
        }

        #score-display {
            font-size: clamp(1.8rem, 4vw, 2.5rem);
            color: var(--gold-color);
            font-weight: 700;
            text-shadow: 2px 2px 2px #000;
            line-height: 1;
        }
        
        #round-winnings-display {
            font-size: clamp(1.5rem, 3vw, 2rem);
            color: #a7c5eb;
            text-shadow: 1px 1px 2px #000;
        }

        #round-winnings-mobile {
            margin-top: 5px;
            font-size: 0.9rem;
            color: #a7c5eb;
        }
        #round-winnings-mobile .label {
            color: var(--font-color-light);
            font-weight: normal;
        }
        #round-winnings-display-mobile {
            font-weight: bold;
        }

        #won-prize-container {
            display: none;
            flex-direction: column;
            align-items: center;
            background-color: rgba(0,0,0,0.4);
            border: 2px solid var(--special-prize-color);
            border-radius: 10px;
            padding: 8px 15px;
            margin-top: 10px;
            width: 90%;
            max-width: 350px;
            text-align: center;
        }
        #won-prize-container .prize-label {
            font-size: 0.8rem;
            text-transform: uppercase;
            color: #ddd;
        }
        #won-prize-container .prize-name {
            font-size: 1.1rem;
            font-weight: bold;
            color: var(--special-prize-color);
            text-shadow: 1px 1px 2px #000;
        }
        
        #host-message {
            background: rgba(0,0,0,0.2);
            border: 2px solid rgba(244, 233, 216, 0.5);
            color: white;
            padding: 10px;
            border-radius: 10px;
            min-height: 4em;
            text-align: center;
            font-size: clamp(0.9rem, 1.5vw, 1.1rem);
            display: flex;
            align-items: center;
            justify-content: center;
            width: 100%;
            max-width: 400px;
        }
        #host-message strong { color: var(--gold-color); }
        #host-message a {
            color: var(--gold-color);
            text-decoration: underline;
            font-weight: bold;
            cursor: pointer;
        }

        #power-meter-container {
            width: 90%;
            max-width: 350px;
            height: 25px;
            background-color: var(--bg-dark-wood);
            border: 3px solid #f4e9d8;
            border-radius: 10px;
            overflow: hidden;
            padding: 3px;
        }
        #power-meter-bar {
            width: 0%;
            height: 100%;
            background: linear-gradient(90deg, #4caf50, #ffeb3b, #f44336);
            border-radius: 5px;
        }
        #power-meter-bar.power-up {
            animation: power-up-anim 1.5s linear infinite;
        }
        @keyframes power-up-anim {
            0% { width: 0%; }
            50% { width: 100%; }
            100% { width: 0%; }
        }

        #action-buttons {
            display: flex;
            gap: 10px;
            justify-content: center;
            width: 100%;
            flex-wrap: wrap;
        }
        .action-btn {
            padding: 12px 15px;
            font-family: 'Roboto Slab', serif;
            font-weight: 700;
            font-size: clamp(0.8rem, 2vw, 1rem);
            border-radius: 8px;
            border: 1px solid var(--bg-dark-wood);
            border-bottom: 4px solid var(--bg-dark-wood);
            box-shadow: 2px 2px 5px rgba(0,0,0,0.5);
            cursor: pointer;
            transition: all 0.1s ease;
            text-transform: uppercase;
            flex-grow: 1;
            max-width: 150px;
        }
        .action-btn:hover:not(:disabled) { filter: brightness(1.1); }
        .action-btn:active:not(:disabled) { transform: translateY(3px); border-bottom-width: 1px; }
        .action-btn:disabled { opacity: 0.5; cursor: not-allowed; }

        #spin-button { background-color: #4caf50; color: white; }
        #solve-button { background-color: var(--gold-color); color: var(--font-color-dark); }
        #bank-offer-button { background-color: #673ab7; color: white; display: none; }
        #new-game-button { background-color: #607d8b; color: white; margin-top: 10px; width: 100%; max-width: 310px;}
        
        #rules-container {
            background-color: var(--bg-wood);
            color: var(--font-color-light);
            padding: 20px;
            margin-top: 20px;
            width: 100%;
            max-width: 1400px;
            border-radius: 15px;
            border: 5px solid var(--bg-dark-wood);
            box-shadow: 0 0 15px rgba(0,0,0,0.5);
        }
        #rules-container h2 { font-family: 'Shrikhand', cursive; color: var(--gold-color); text-align: center; margin-top: 0; text-shadow: 2px 2px 2px #000; }
        #rules-container ul { list-style-type: none; padding: 0; }
        #rules-container li { margin-bottom: 12px; padding-left: 30px; position: relative; line-height: 1.4; }
        #rules-container li::before {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            font-size: 1.2rem;
            position: absolute;
            left: 0;
            top: 0;
        }
        #rules-container li.goal::before { content: '🎯'; }
        #rules-container li.gameplay::before { content: '🔄'; }
        #rules-container li.wheel::before { content: '🎡'; }
        #rules-container li.week::before { content: '🗓️'; }
        #rules-container li.sunday::before { content: '🌟'; }
        #rules-container li.millionaire::before { content: '👑'; }
        #rules-container strong { color: var(--gold-color); font-weight: 700; }

        .modal-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.7); display: flex;
            justify-content: center; align-items: center; z-index: 1000;
            opacity: 0; visibility: hidden; transition: opacity 0.3s ease, visibility 0.3s ease;
        }
        .modal-overlay.visible { opacity: 1; visibility: visible; }
        .modal-content {
            background-color: var(--bg-wood); padding: 30px;
            border-radius: 15px; border: 5px solid var(--bg-dark-wood);
            box-shadow: 0 5px 25px rgba(0,0,0,0.7); text-align: center;
            color: var(--font-color-light); width: 90%; max-width: 500px;
            transform: scale(0.9); transition: transform 0.3s ease;
        }
        .modal-overlay.visible .modal-content { transform: scale(1); }
        .modal-content h3 {
            font-family: 'Shrikhand', cursive; color: var(--gold-color);
            margin-top: 0; font-size: 2rem; text-shadow: 2px 2px 2px #000;
        }
        .modal-content p { font-size: 1.1rem; margin-bottom: 20px; }
        .modal-input {
            width: 100%; padding: 10px; font-size: 1.2rem;
            border-radius: 5px; border: 2px solid var(--gold-color);
            background: var(--font-color-light); color: var(--font-color-dark);
            box-sizing: border-box; margin-bottom: 20px; text-transform: uppercase;
        }
        .modal-buttons { display: flex; gap: 15px; justify-content: center; flex-wrap: wrap; }
        .modal-btn {
            padding: 12px 25px; font-family: 'Roboto Slab', serif;
            font-weight: 700; font-size: 1rem; border-radius: 8px;
            border: 1px solid var(--bg-dark-wood); border-bottom: 4px solid var(--bg-dark-wood);
            box-shadow: 2px 2px 5px rgba(0,0,0,0.5); cursor: pointer;
            transition: all 0.1s ease; text-transform: uppercase;
        }
        #modal-confirm-btn { background-color: var(--gold-color); color: var(--font-color-dark); }
        #modal-cancel-btn { background-color: #607d8b; color: white; }
        
        #main-prize-modal {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.9); z-index: 2000;
            display: none; flex-direction: column; justify-content: center;
            align-items: center; color: white; padding: 20px; box-sizing: border-box;
        }
        #main-prize-title {
            font-family: 'Shrikhand', cursive; font-size: clamp(2rem, 8vw, 4rem);
            color: var(--gold-color); text-shadow: 3px 3px 5px #000; margin-bottom: 20px;
        }
        #main-prize-board .puzzle-tile { width: clamp(40px, 6vw, 60px); height: clamp(50px, 8vw, 75px); }
        #main-prize-board .tile-back { font-size: clamp(2rem, 5vw, 3rem); }
        #main-prize-given-letters { margin-top: 20px; font-size: 1.2rem; }
        #main-prize-timer {
            font-size: clamp(3rem, 12vw, 6rem); font-weight: 700;
            color: var(--gold-color); margin: 10px 0; text-shadow: 2px 2px 4px #000;
        }
        #main-prize-timer.timer-low { color: var(--pointer-red); animation: pulse 1s infinite; }
        @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.05); } 100% { transform: scale(1); } }
        #main-prize-confirm-btn { width: 100%; max-width: 600px; padding: 15px; font-size: 1.2rem; }
        
        .desktop-only { display: none; }
        .mobile-only { display: none; }

        @media (min-width: 901px) { .desktop-only { display: flex; } }

        @media (max-width: 900px) {
            .mobile-only { display: block; } .desktop-only { display: none; }
            body { padding: 10px; }
            #tv-container { padding: 15px; border-width: 10px; border-radius: 20px; }
            #screen { padding: 10px; border-radius: 10px; gap: 15px; }
            #game-area { flex-direction: column; align-items: center; gap: 25px; }
            #puzzle-section { width: 100%; }
            #game-controls-section { width: 100%; max-width: 450px; }
            #puzzle-board { gap: 4px; } .puzzle-row { gap: 4px; }
            .puzzle-tile { width: clamp(28px, 6.5vw, 45px); height: clamp(38px, 8.5vw, 55px); }
            .tile-back { font-size: clamp(1.2rem, 5vw, 2.2rem); }
            .alphabet-key { width: 32px; height: 32px; font-size: 0.9rem; }
            #wheel-wrapper { width: clamp(260px, 75vw, 350px); }
            #host-message { min-height: 3em; font-size: clamp(0.85rem, 3vw, 1rem); }
            #rules-container { padding: 15px; }
            #rules-container h2 { font-size: 1.8rem; } #rules-container li { font-size: 0.9rem; }
            #round-display { font-size: 0.9rem; } #hour-block-display { font-size: 0.8rem; }
        }

        @media (max-width: 480px) {
            body { padding: 5px; }
            #tv-container { padding: 5px; border-width: 8px; }
            #logo-container { width: clamp(280px, 80vw, 320px); }
            .puzzle-row { gap: 3px; }
            .puzzle-tile { width: clamp(24px, 6vw, 35px); height: clamp(32px, 8vw, 45px); }
            .alphabet-key { width: calc(10% - 5px); height: 30px; font-size: 0.8rem; padding: 0; }
            #alphabet-panel { gap: 4px; padding: 8px; }
            .action-btn { padding: 10px 12px; font-size: 0.75rem; }
            .player-hud { padding: 5px 15px; }
            #score-display { font-size: clamp(1.5rem, 5vw, 2rem); }
        }
    </style>
</head>
<body>
    <header>
        <div id="logo-container">
            <svg id="logo-svg" viewBox="0 0 500 150">
                <defs>
                    <style>@import url('https://fonts.googleapis.com/css2?family=Great+Vibes&family=Bevan&display=swap');</style>
                    <linearGradient id="chromeGradient" x1="0%" y1="0%" x2="0%" y2="100%"><stop offset="0%" style="stop-color:#d0d0d0; stop-opacity:1" /><stop offset="30%" style="stop-color:#f0f0f0; stop-opacity:1" /><stop offset="50%" style="stop-color:#a0a0a0; stop-opacity:1" /><stop offset="100%" style="stop-color:#707070; stop-opacity:1" /></linearGradient>
                    <linearGradient id="goldGradient" x1="0%" y1="0%" x2="0%" y2="100%"><stop offset="0%" style="stop-color:#fff2a8; stop-opacity:1" /><stop offset="50%" style="stop-color:#f7b733; stop-opacity:1" /><stop offset="100%" style="stop-color:#e69a00; stop-opacity:1" /></linearGradient>
                    <filter id="glow"><feGaussianBlur stdDeviation="3.5" result="coloredBlur"/><feMerge><feMergeNode in="coloredBlur"/><feMergeNode in="SourceGraphic"/></feMerge></filter>
                </defs>
                <text x="250" y="70" font-family="'Great Vibes', cursive" font-size="65" fill="url(#goldGradient)" text-anchor="middle" stroke="#412A18" stroke-width="1" filter="url(#glow)">Békebeli</text>
                <text x="250" y="120" font-family="'Bevan', cursive" font-size="42" fill="#1E1E1E" text-anchor="middle" transform="translate(4, 4)" opacity="0.6" letter-spacing="2">SZERENCSEKERÉK</text>
                <text x="250" y="120" font-family="'Bevan', cursive" font-size="42" fill="url(#chromeGradient)" stroke="#222" stroke-width="1.5" text-anchor="middle" letter-spacing="2">SZERENCSEKERÉK</text>
                <text x="250" y="120" font-family="'Bevan', cursive" font-size="42" fill="white" opacity="0.4" text-anchor="middle" letter-spacing="2" clip-path="polygon(0 0, 100% 0, 100% 45%, 0 45%)">SZERENCSEKERÉK</text>
            </svg>
        </div>
        <h2 id="sunday-title">Szerencse Vasárnap</h2>
    </header>
    <div id="tv-container">
        <div id="screen">
            <div id="game-area">
                <section id="puzzle-section">
                    <div id="puzzle-category"></div>
                    <div id="round-info-container">
                        <div id="round-display"></div>
                        <div id="hour-block-display"></div>
                    </div>
                    <div id="puzzle-board"></div>
                    <div id="alphabet-panel"></div>
                </section>
                <section id="game-controls-section">
                     <div id="all-huds-container">
                        <div id="main-hud" class="player-hud">
                            <div class="hud-label"><span id="millionaire-icon">👑</span><span id="main-hud-label">Heti Kassza</span></div>
                            <div id="score-display">0 Ft</div>
                            <div id="round-winnings-mobile" class="mobile-only">
                                <span class="label">Fordulóban: </span>
                                <span id="round-winnings-display-mobile">0 Ft</span>
                            </div>
                        </div>
                        <div id="round-winnings-hud" class="player-hud desktop-only">
                            <div class="hud-label">Ebben a fordulóban:</div>
                            <div id="round-winnings-display">0 Ft</div>
                        </div>
                    </div>
                    <div id="won-prize-container">
                        <div class="prize-label">Az Ön Különdíja</div>
                        <div id="won-prize-name" class="prize-name"></div>
                    </div>
                    <div id="wheel-wrapper">
                        <div id="wheel-pointer"></div>
                        <svg id="wheel" viewBox="0 0 100 100"></svg>
                    </div>
                    <div id="power-meter-container">
                        <div id="power-meter-bar"></div>
                    </div>
                    <div id="host-message">Üdvözlöm a stúdióban! Kezdéshez pörgessen egyet!</div>
                    <div id="action-buttons">
                        <button id="spin-button" class="action-btn">Pörgetés</button>
                        <button id="solve-button" class="action-btn">Megfejtem</button>
                        <button id="bank-offer-button" class="action-btn">Bank Ajánlata</button>
                        <button id="new-game-button" class="action-btn">Új Játék</button>
                    </div>
                </section>
            </div>
        </div>
    </div>

    <div id="rules-container">
        <h2>Játékszabályzat</h2>
        <ul>
            <li class="goal"><strong>A Játék Célja:</strong> Gyűjtse a legtöbb pénzt a hét folyamán feladványok megfejtésével! Pörgessen a keréken, tippeljen betűket, és oldja meg a rejtvényeket, hogy növelje a Heti Kasszáját.</li>
            <li class="gameplay"><strong>A Játék Menete:</strong> Minden forduló egy új feladvánnyal kezdődik. A játékos pörget a szerencsekeréken, hogy meghatározza egy helyes mássalhangzó értékét. Ha a tippelt betű szerepel a feladványban, a pörgetett összeg annyiszor kerül jóváírásra, ahány darab van belőle. A játékos vásárolhat magánhangzókat is a fordulóban szerzett pénzből, vagy megpróbálhatja megfejteni a feladványt.</li>
            <li class="wheel"><strong>Különleges Mezők a Keréken:</strong> A pénzösszegeken kívül a kerék tartalmaz különleges mezőket is: <strong>CSŐD</strong> (elveszti a fordulós nyereményt), <strong>KIMARADSZ</strong> (elveszti a kört), <strong>EXPRESSZ</strong> (gyors egymásutáni tippelési lehetőség fix összegért), és a 2. körtől a <strong>KÜLÖNDÍJ</strong> (retro tárgynyeremény vagy annak értékének fele készpénzben).</li>
            <li class="week"><strong>Heti Ciklus:</strong> A játék hétfőtől vasárnapig tart. A hétfőtől szombatig gyűjtött nyeremények a <strong>Heti Kasszába</strong> kerülnek. Ez a kassza minden hétfőn nullázódik, így minden hét egy új kihívás.</li>
            <li class="sunday"><strong>Szerencse Vasárnap:</strong> A vasárnap a hét fénypontja! Ezen a napon a Heti Kasszában összegyűjtött pénzével játszik. Minden forduló elején <strong>tétet kell tennie</strong> ebből az összegből. Ha sikeresen megfejti a feladványt, a tét visszajár, és a fordulós nyeremény is hozzáadódik a kasszához. Ha azonban CSŐDÖT pörget, nemcsak a fordulós pénzét, de a feltett tétet is elveszíti! A Heti Kassza sosem mehet 0 alá.</li>
            <li class="millionaire"><strong>A Hét Milliomosa:</strong> Az a játékos, aki a vasárnapi játék végén <strong>1.000.000 Ft feletti</strong> összeggel zárja a Heti Kasszát, elnyeri "A Hét Milliomosa" címet! Jutalmul a következő héten egy 👑 korona ikon díszíti a nevét, jelezve dicsőségét.</li>
        </ul>
    </div>

    <div id="custom-modal" class="modal-overlay">
        <div class="modal-content">
            <h3 id="modal-title">Megfejtés</h3>
            <p id="modal-text">Kérem a teljes megfejtést:</p>
            <input type="text" id="solve-input" class="modal-input" autocomplete="off">
            <div class="modal-buttons">
                <button id="modal-confirm-btn" class="modal-btn">Rendben</button>
                <button id="modal-cancel-btn" class="modal-btn">Mégse</button>
            </div>
        </div>
    </div>
    
    <div id="main-prize-modal">
        <h2 id="main-prize-title">Fődíj Játék</h2>
        <div id="main-prize-category"></div>
        <div id="main-prize-board" class="puzzle-board"></div>
        <div id="main-prize-given-letters"></div>
        <div id="main-prize-timer">50</div>
         <p id="main-prize-instructions">Adja meg a megfejtést, mielőtt lejár az idő!</p>
        <input type="text" id="main-prize-solve-input" class="modal-input" autocomplete="off" placeholder="Ide írja a megfejtést...">
        <button id="main-prize-confirm-btn" class="modal-btn">Megfejtem!</button>
    </div>

    <audio id="spin-sound" src="https://actions.google.com/sounds/v1/games/spinner_spin.ogg" preload="auto"></audio>
    <audio id="correct-sound" src="https://actions.google.com/sounds/v1/correct_answer/positive_answer.ogg" preload="auto"></audio>
    <audio id="bankrupt-sound" src="https://actions.google.com/sounds/v1/losses/splat.ogg" preload="auto"></audio>
    <audio id="win-sound" src="https://actions.google.com/sounds/v1/crowds/battle_crowd_celebrate_stutter.ogg" preload="auto"></audio>
    <audio id="lucky-sound" src="https://actions.google.com/sounds/v1/cartoon/magic_chime.ogg" preload="auto"></audio>
    <audio id="timer-sound" src="https://actions.google.com/sounds/v1/alarms/digital_watch_alarm_long.ogg" loop preload="auto"></audio>
    <audio id="prize-sound" src="https://actions.google.com/sounds/v1/achievements/achievement_fantastic.ogg" preload="auto"></audio>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // === IDE ILLESSZE BE A FELADVÁNYOKAT ===
            const allPuzzles = [
    // === KÖZMONDÁSOK ÉS SZÓLÁSOK ===
    { category: "Közmondás", puzzle: "JOBB FÉLNI MINT MEGIJEDNI", hints: ["Az óvatosság sosem árt.", "A megelőzés fontosabb, mint a következmények kezelése."] },
    { category: "Közmondás", puzzle: "MINDEN SZENTNEK MAGA FELÉ HAJLIK A KEZE", hints: ["Az ember elsősorban a saját érdekeit nézi.", "Az önzés természetes emberi tulajdonságra utal."] },
    { category: "Szólás", puzzle: "VERI AZ ÖRDÖG A FELESÉGÉT", hints: ["Egyszerre esik az eső és süt a nap.", "Időjárási jelenségre utaló népi mondás."] },
    { category: "Közmondás", puzzle: "KI MINT VET ÚGY ARAT", hints: ["A tetteink következményei utolérnek minket.", "A befektetett munka arányos lesz az eredménnyel."] },
    { category: "Szólás", puzzle: "KÖNNYŰ A MÁSIK FOGÁVAL CSALÁNT VERNI", hints: ["Másokkal könnyű elvégeztetni a kellemetlen feladatot.", "A kockázatot másra hárítja."] },
    { category: "Közmondás", puzzle: "A SZÜKSÉG TÖRVÉNYT BONT", hints: ["Kényszerhelyzetben az ember olyat is megtesz, amit normál esetben nem tenne.", "A szabályok felülíródhatnak vészhelyzetben."] },
    { category: "Szólás", puzzle: "ÉSZREVESZI A SZÁLKÁT DE A GERENDÁT NEM", hints: ["Mások apró hibáit kritizálja, miközben a saját nagy hibáit nem látja.", "Bibliai eredetű szólás."] },
    { category: "Közmondás", puzzle: "NEM ZÖRÖG A HARASZT HA NEM FÚJJA A SZÉL", hints: ["A pletykáknak általában van valamilyen valóságalapja.", "Nem ok nélkül beszélnek valamiről."] },
    { category: "Szólás", puzzle: "MEGESZI A KEFÉT", hints: ["Nagy bajba kerül, csúnyán ráfázik.", "Súlyos következményekkel járó hibát követ el."] },
    { category: "Közmondás", puzzle: "A MEDVE NEM JÁTÉK", hints: ["Nem szabad alábecsülni a veszélyes dolgokat.", "Komolyan kell venni a fenyegetést."] },
    { category: "Szólás", puzzle: "FELTETTE AZ I-RE A PONTOT", hints: ["Valami tökéletes befejezést, lezárást adott a dolognak.", "A végső simítást végezte el."] },
    { category: "Közmondás", puzzle: "AHÁNY HÁZ ANNYI SZOKÁS", hints: ["Minden közösségnek megvannak a saját szabályai és hagyományai.", "El kell fogadni, hogy máshol másképp mennek a dolgok."] },
    { category: "Szólás", puzzle: "AZT SEM TUDJA MELYIK LÁBÁRA ÁLLJON", hints: ["Nagy zavarában vagy örömében nem tud mit kezdeni magával.", "Teljesen tanácstalan a helyzetben."] },
    { category: "Közmondás", puzzle: "EVÉS KÖZBEN JÖN MEG AZ ÉTVÁGY", hints: ["Belekezdve egy dologba, megjön hozzá a kedvünk.", "A kezdeti nehézségek után élvezetessé válhat a feladat."] },
    { category: "Szólás", puzzle: "KÖPÖNYEGET FORGAT", hints: ["Az érdekei szerint változtatja a véleményét.", "Nem megbízható, mindig a számára kedvezőbb oldalra áll."] },
    { category: "Közmondás", puzzle: "AZ IDŐ PÉNZ", hints: ["Nem szabad vesztegetni az időt, mert az érték.", "A hatékonyság fontosságára hívja fel a figyelmet."] },
    { category: "Szólás", puzzle: "MEGTANULTA A LECKÉT", hints: ["Egy rossz tapasztalatból okulva többé nem követi el ugyanazt a hibát.", "Levonta a következtetést a történtekből."] },
    { category: "Közmondás", puzzle: "A HAZUG EMBERT HAMARABB UTOLÉRIk MINT A SÁNTA KUTYÁT", hints: ["A hazugságok hamar kiderülnek.", "Nem lehet sokáig fenntartani a valótlanságot."] },
    { category: "Szólás", puzzle: "EZ MÁR A MÚLTÉ", hints: ["Lezárult, befejeződött dolog, amivel már nem kell foglalkozni.", "Nem aktuális többé."] },
    { category: "Közmondás", puzzle: "A LÓTÚRÓT SEM ÉR", hints: ["Teljesen értéktelen, haszontalan dolog.", "Semmi haszna nincsen."] },
    { category: "Szólás", puzzle: "CSÖBÖRBŐL VÖDÖRBE", hints: ["Egy rossz helyzetből egy még rosszabba kerül.", "Nem javult, sőt romlott a helyzete."] },
    { category: "Film", puzzle: "A KERESZTAPA", hints: ["Egy olasz-amerikai maffiacsalád története.", "Marlon Brando felejthetetlen alakítása Don Corleone szerepében."] },
    { category: "Film", puzzle: "EREDET", hints: ["Leonardo DiCaprio egy álomtolvajt alakít.", "Christopher Nolan filmje, ahol az álmok több szinten zajlanak."] },
    { category: "Film", puzzle: "MACSKA-JAJ", hints: ["Emir Kusturica abszurd humorú filmje a Duna partján.", "Cigány esküvők, csalások és egy hatalmas disznó története."] },
    { category: "Film", puzzle: "A SÖTÉT LOVAG", hints: ["Batman és Joker küzdelme Gotham városáért.", "Heath Ledger posztumusz Oscar-díjat kapott Joker alakításáért."] },
    { category: "Film", puzzle: "ÉLETREVALÓK", hints: ["Egy gazdag, lebénult arisztokrata és ápolójának barátsága.", "Francia vígjáték, amely valós történeten alapul."] },
    { category: "Film", puzzle: "AZ ÉLŐSKÖDŐK", hints: ["Egy szegény dél-koreai család beférkőzik egy gazdag család életébe.", "Ez a film nyerte el első idegen nyelvű filmként a legjobb filmnek járó Oscar-díjat."] },
    { category: "Film", puzzle: "A NAGY LEBOWSKI", hints: ["A Coen testvérek kultikus filmje egy lusta, bowlingozó férfiról.", "'Töki' kalandjai egy elcserélt szőnyeg miatt kezdődnek."] },
    { category: "Film", puzzle: "A HALÁL SZORÍTÁSÁBAN", hints: ["Egy bombaszakértő mindennapjai az iraki háborúban.", "Kathryn Bigelow rendezte, aki elnyerte a legjobb rendezőnek járó Oscart."] },
    { category: "Film", puzzle: "AMÉLIE CSODÁLATOS ÉLETE", hints: ["Egy párizsi lány apró örömökkel próbálja jobbá tenni mások életét.", "Jean-Pierre Jeunet vizuálisan lenyűgöző filmje."] },
    { category: "Film", puzzle: "DJANGO ELSZABADUL", hints: ["Egy felszabadított rabszolga bosszúhadjárata a vadnyugaton.", "Quentin Tarantino westernfilmje Jamie Foxx főszereplésével."] },
    { category: "Film", puzzle: "A bárányok hallgatnak", hints: ["Egy fiatal FBI-ügynök egy kannibál sorozatgyilkos segítségét kéri.", "Anthony Hopkins ikonikus alakítása Hannibal Lecter szerepében."] },
    { category: "Film", puzzle: "MÁTRIX", hints: ["Neo rájön, hogy a világ, amiben él, csupán egy számítógépes szimuláció.", "'Kéred a piros vagy a kék pirulát?'"] },
    { category: "Film", puzzle: "AZ OROSZLÁNKIRÁLY", hints: ["Egy fiatal oroszlán története, aki visszaszerzi jogos helyét a trónon.", "'Hakuna Matata!'"] },
    { category: "Film", puzzle: "SHREK", hints: ["Egy mogorva ogre kalandja egy szószátyár szamárral.", "A film parodizálja a klasszikus tündérmeséket."] },
    { category: "Film", puzzle: "WALL-E", hints: ["Egy magányos robot a szeméttel borított Földön.", "A Pixar animációs filmje a környezetvédelemről és a szerelemről."] },
    { category: "Film", puzzle: "SAUL FIA", hints: ["Egy auschwitzi fogoly története a krematóriumban.", "Nemes Jeles László Oscar-díjas magyar filmje."] },
    { category: "Film", puzzle: "A TENKES KAPITÁNYA", hints: ["Magyar történelmi kalandfilmsorozat a Rákóczi-szabadságharc idejéből.", "Buga Jakab és Eke Máté a főszereplői."] },
    { category: "Film", puzzle: "SZAFFI", hints: ["Jókai Mór kisregénye alapján készült rajzfilm.", "Dargay Attila rendezte, a török időkben játszódik."] },
    { category: "Film", puzzle: "FEHÉR TENYÉR", hints: ["Egy tornászfiú küzdelmei a 80-as években és utána.", "Hajdu Szabolcs filmje a sport és a politika kapcsolatáról."] },
    { category: "Film", puzzle: "VANNAK VIDÉKEK", hints: ["A Punnany Massif zenekar dalának címe is lehetne.", "Egy szatíra a magyar vidékről és annak furcsa figuráiról."] },
    { category: "Együttes", puzzle: "ILLÉS EGYÜTTES", hints: ["A magyar beatkorszak egyik legmeghatározóbb zenekara.", "Bródy János és Szörényi Levente neve fémjelzi."] },
    { category: "Dalcím", puzzle: "A JÓ, A ROSSZ ÉS A CSÚF", hints: ["Ennio Morricone ikonikus filmzenéje.", "Egy híres spagettiwestern főcímzenéje."] },
    { category: "Együttes", puzzle: "ABBA", hints: ["Svéd popzenekar, akik a 'Waterloo'-val nyertek Eurovíziót.", "A Mamma Mia! musical az ő dalaikra épül."] },
    { category: "Dalcím", puzzle: "SMELLS LIKE TEEN SPIRIT", hints: ["A Nirvana együttes legnagyobb slágere.", "A grunge zenei stílus himnuszának tartják."] },
    { category: "Együttes", puzzle: "THE BEATLES", hints: ["A 'gombafejűek' Liverpoolból.", "John Lennon, Paul McCartney, George Harrison és Ringo Starr."] },
    { category: "Dalcím", puzzle: "SZÁLLJ EL KISMADÁR", hints: ["A Republic együttes egyik legismertebb dala.", "A refrénje gyakran felcsendül tábortüzek mellett."] },
    { category: "Együttes", puzzle: "METALLICA", hints: ["A thrash metal egyik legmeghatározóbb zenekara.", "'Nothing Else Matters' című dalukkal a szélesebb közönség is megismerte őket."] },
    { category: "Dalcím", puzzle: "GYÖNGYHAJÚ LÁNY", hints: ["Az Omega együttes dala, amit még Kanye West is feldolgozott.", "A 'New Slaves' című számban hallható a dallama."] },
    { category: "Együttes", puzzle: "UFO", hints: ["A 90-es évek magyar happy hardcore és dance csapata.", "A 'Szerelemdoktor' és a 'Napolaj' is az ő slágerük."] },
    { category: "Dalcím", puzzle: "SZERETLEK IS MEG NEM IS", hints: ["Az R-GO egyik legismertebb dala.", "Szikora Róbert és a gidák adták elő."] },
    { category: "Együttes", puzzle: "CARSON COMA", hints: ["Modern magyar alternatív rockzenekar.", "A 'Pók' és az 'Osztálykirándulás' című dalaik népszerűek."] },
    { category: "Dalcím", puzzle: "ŐRIZEM A SZEMED", hints: ["A Punnany Massif és a Halott Pénz közös dala.", "Pécsi zenekarok sikeres együttműködése."] },
    { category: "Együttes", puzzle: "L'ART POUR L'ART TÁRSULAT", hints: ["Az abszurd humor magyarországi nagykövetei.", "A Besenyő család és a 'No, de meg kell zabálni' fűződik a nevükhöz."] },
    { category: "Dalcím", puzzle: "JÉGVIRÁG", hints: ["A V'Moto-Rock lírai dala.", "Demjén Ferenc énekli: 'Várj, míg felkel majd a nap...'"] },
    { category: "Együttes", puzzle: "PIRAMIS", hints: ["A 'Becsület' és a 'Szállj fel magasra' című dalok előadója.", "Révész Sándor volt a legendás énekese."] },
    { category: "Dalcím", puzzle: "DARABOKRA SZEDNÉM A SZÍVEMET", hints: ["A Zanzibar együttes rockballadája.", "Terecskei Rita az énekesnője."] },
    { category: "Együttes", puzzle: "HAPPY GANG", hints: ["A 90-es évek magyar rap-pop csapata.", "'A fiúk a bányában dolgoznak' az egyik nagy slágerük."] },
    { category: "Dalcím", puzzle: "AZ ÉJJEL SOHA NEM ÉRHET VÉGET", hints: ["A Soho Party dala, ami a magyar labdarúgó-válogatott szurkolói himnusza lett.", "A 2016-os Európa-bajnokság alatt lett újra népszerű."] },
    { category: "Együttes", puzzle: "VALMAR", hints: ["Modern magyar popduó, Marics Peti és Valkusz Milán.", "Az 'Úristen' című daluk hatalmas siker volt."] },
    { category: "Dalcím", puzzle: "MERT A NÉP SOK", hints: ["A Beatrice együttes rendszerkritikus dala.", "Nagy Feró és a 'nemzet csótánya'."] },
    { category: "Történelem", puzzle: "A TATÁRJÁRÁS", hints: ["A mongol seregek pusztító hadjárata Magyarország ellen a 13. században.", "IV. Béla király a 'második honalapító'."] },
    { category: "Esemény", puzzle: "A SZÁZÉVES HÁBORÚ", hints: ["Anglia és Franciaország hosszan elhúzódó konfliktusa a középkorban.", "Jeanne d'Arc is ebben a háborúban harcolt."] },
    { category: "Történelem", puzzle: "A DÓZSA-FÉLE PARASZTHÁBORÚ", hints: ["A legnagyobb magyarországi parasztfelkelés 1514-ben.", "A vezetőjét tüzes trónra ültették."] },
    { category: "Esemény", puzzle: "A REFORMÁCIÓ", hints: ["A katolikus egyház megújulását célzó mozgalom a 16. században.", "Luther Márton nevéhez fűződik a kezdete."] },
    { category: "Történelem", puzzle: "AZ AMERIKAI FÜGGETLENSÉGI HÁBORÚ", hints: ["A tizenhárom gyarmat harca a Brit Birodalom ellen.", "A Függetlenségi Nyilatkozatot 1776-ban adták ki."] },
    { category: "Történelmi Személy", puzzle: "SZÉCHENYI ISTVÁN", hints: ["A 'legnagyobb magyar', a reformkor kiemelkedő alakja.", "A Lánchíd megépítése és a Magyar Tudományos Akadémia megalapítása is a nevéhez fűződik."] },
    { category: "Esemény", puzzle: "AZ IPARI FORRADALOM", hints: ["A gépek és a gyárak elterjedése a 18-19. században.", "A gőzgép feltalálása kulcsfontosságú volt."] },
    { category: "Történelmi Személy", puzzle: "KOSSUTH LAJOS", hints: ["Az 1848-49-es forradalom és szabadságharc vezetője.", "Magyarország kormányzó-elnöke volt."] },
    { category: "Esemény", puzzle: "AZ ELSŐ VILÁGHÁBORÚ", hints: ["A 'nagy háború', amely 1914-től 1918-ig tartott.", "A szarajevói merénylet volt a kirobbantó oka."] },
    { category: "Történelmi Személy", puzzle: "TERÉZ ANYA", hints: ["Nobel-békedíjas apáca, aki a szegényekért és betegekért dolgozott Kalkuttában.", "A Szeretet Misszionáriusai rend alapítója."] },
    { category: "Tudomány", puzzle: "NAGY BUMM", hints: ["Az ősrobbanás elmélete a Világegyetem keletkezéséről.", "Eszerint az univerzum egy rendkívül sűrű és forró állapotból tágult ki."] },
    { category: "Feltaláló", puzzle: "RUBIK ERNŐ", hints: ["A világhírű bűvös kocka feltalálója.", "Magyar építész, tervező és játéktervező."] },
    { category: "Technika", puzzle: "OKOSTELEFON", hints: ["Érintőképernyős mobiltelefon fejlett operációs rendszerrel.", "Az internetezés, a fotózás és az applikációk futtatása is a funkciói közé tartozik."] },
    { category: "Tudomány", puzzle: "EVOLÚCIÓS ELMÉLET", hints: ["Charles Darwin nevéhez fűződik a természetes kiválasztódás elve.", "Az élőlények fejlődését és változását magyarázza."] },
    { category: "Feltaláló", puzzle: "TELLES EDE", hints: ["A hidrogénbomba 'atyjaként' ismert magyar-amerikai fizikus.", "Jelentős szerepet játszott a Manhattan-tervben is."] },
    { category: "Technika", puzzle: "DRÓN", hints: ["Pilóta nélküli repülő eszköz.", "Használják filmezésre, csomagszállításra és katonai célokra is."] },
    { category: "Tudomány", puzzle: "PERIÓDUSOS RENDSZER", hints: ["A kémiai elemek táblázatos elrendezése.", "Mengyelejev alkotta meg az első változatát."] },
    { category: "Feltaláló", puzzle: "GALILEO GALILEI", hints: ["Olasz csillagász, aki tökéletesítette a távcsövet.", "Kiállt a heliocentrikus világkép mellett, amiért az inkvizíció elítélte."] },
    { category: "Technika", puzzle: "MESTERSÉGES INTELLIGENCIA", hints: ["Olyan számítógépes rendszerek, amelyek képesek az emberi gondolkodáshoz hasonló feladatokat ellátni.", "Napjaink egyik leggyorsabban fejlődő technológiai területe."] },
    { category: "Tudomány", puzzle: "KLÓNOZÁS", hints: ["Egy élőlény genetikailag azonos másolatának létrehozása.", "Dolly, a bárány volt az első sikeresen ... állat."] },
    { category: "Művészet", puzzle: "MONA LISA", hints: ["Leonardo da Vinci leghíresebb festménye.", "A párizsi Louvre-ban van kiállítva, rejtélyes mosolyáról híres."] },
    { category: "Építészet", puzzle: "EIFFEL-TORONY", hints: ["Párizs ikonikus vasszerkezetű tornya.", "Az 1889-es világkiállításra épült."] },
    { category: "Festő", puzzle: "VAN GOGH", hints: ["Holland festő, aki levágta a saját fülét.", "Leghíresebb művei a 'Napraforgók' és a 'Csillagos éj'."] },
    { category: "Kulturális Esemény", puzzle: "RIÓI KARNEVÁL", hints: ["A világ legnagyobb és leghíresebb karneválja Brazíliában.", "A szambaiskolák látványos felvonulásáról ismert."] },
    { category: "Művészet", puzzle: "A GONDOLKODÓ", hints: ["Auguste Rodin híres bronzszobra egy mélyen töprengő férfiról.", "A párizsi Rodin Múzeumban található az eredeti."] },
    { category: "Építészet", puzzle: "KÍNAI NAGY FAL", hints: ["A világ leghosszabb erődítményrendszere.", "Állítólag az egyetlen emberi építmény, ami látszik a Holdról."] },
    { category: "Festő", puzzle: "PABLO PICASSO", hints: ["Spanyol festő, a kubizmus egyik megalapítója.", "Az 'Avignoni kisasszonyok' és a 'Guernica' a legismertebb művei."] },
    { category: "Kulturális Esemény", puzzle: "VELENCEI KARNEVÁL", hints: ["Híres az elegáns maszkjairól és a gondolás felvonulásról.", "Olaszország egyik legnépszerűbb éves eseménye."] },
    { category: "Művészet", puzzle: "DÁVID-SZOBOR", hints: ["Michelangelo reneszánsz márványszobra Firenzében.", "A bibliai hőst ábrázolja, mielőtt legyőzné Góliátot."] },
    { category: "Építészet", puzzle: "GÍZAI PIRAMISOK", hints: ["Az ókori Egyiptom fáraóinak síremlékei.", "Az ókori világ hét csodájának egyetlen fennmaradt tagja."] },
    { category: "Állat", puzzle: "KÉK BÁLNA", hints: ["A Földön valaha élt legnagyobb testű állat.", "Sziláscetek közé tartozik, planktonokkal táplálkozik."] },
    { category: "Növény", puzzle: "KAMILLA", hints: ["Gyógynövény, amelyből gyulladáscsökkentő teát főznek.", "Jellegzetes, fehér szirmú, sárga közepű virága van."] },
    { category: "Állat", puzzle: "KAMÉLEON", hints: ["Különleges hüllő, amely képes változtatni a színét.", "Hosszú, ragadós nyelvével kapja el a rovarokat."] },
    { category: "Növény", puzzle: "GYÖNGYVIRÁG", hints: ["Erősen mérgező, de illatos, harang alakú fehér virág.", "Májusban virágzik, az anyák napja jelképe."] },
    { category: "Állat", puzzle: "VÖRÖS PANDA", hints: ["Himalájában élő, mosómedvére emlékeztető kisemlős.", "Főleg bambusszal táplálkozik, de nem rokona az óriáspandának."] },
    { category: "Növény", puzzle: "TÖLGYFA", hints: ["Erős, masszív fa, amelynek termése a makk.", "A magyar erdők egyik leggyakoribb fafajtája."] },
    { category: "Állat", puzzle: "KOLIBRI", hints: ["A világ legkisebb madara, amely képes egy helyben lebegni.", "Rendkívül gyors szárnycsapásairól ismert."] },
    { category: "Növény", puzzle: "LEVENDULA", hints: ["Lila virágú, illatos gyógynövény.", "Nyugtató hatású, gyakran használják a molyok ellen is."] },
    { category: "Állat", puzzle: "LAJHÁR", hints: ["Közép- és Dél-Amerikában élő, rendkívül lassú mozgású emlős.", "Ideje nagy részét fákon lógva tölti."] },
    { category: "Növény", puzzle: "HÓVIRÁG", hints: ["Az egyik legelső tavaszi virág.", "Védett növény, letépése tilos."] },
    { category: "Étel", puzzle: "HORTOBÁGYI PALACSINTA", hints: ["Darálthússal töltött, sós palacsinta, tejfölös-paprikás szósszal.", "A magyar konyha egyik klasszikusa."] },
    { category: "Mitológia", puzzle: "ZEUSZ", hints: ["Az ókori görög istenek királya, az ég és a villámok ura.", "A római mitológiában Jupiter a megfelelője."] },
    { category: "Televíziós Műsor", puzzle: "ANGYALBŐRBEN", hints: ["Magyar katonai vígjátéksorozat a 90-es évekből.", "Usztics Mátyás és Máté Gábor a főszereplői."] },
    { category: "Híres Személy", puzzle: "MARIE CURIE", hints: ["Lengyel származású fizikus és kémikus, aki a radioaktivitást kutatta.", "Az egyetlen nő, aki két különböző tudományágban is Nobel-díjat kapott."] },
    { category: "Édesség", puzzle: "DOBOS TORTA", hints: ["Karamellizált cukorral bevont, csokoládékrémes magyar torta.", "Dobos C. József cukrászmester alkotta meg."] },
    { category: "Foglalkozás", puzzle: "LÉGIUTASKÍSÉRŐ", hints: ["A repülőgépek utasainak biztonságáért és kényelméért felel.", "Sztyuárdessznek is nevezik."] },
    { category: "Mitológia", puzzle: "TOLDI MIKLÓS", hints: ["Arany János elbeszélő költeményének legendás erejű hőse.", "Nagy Lajos király korában élt, a monda szerint."] },
    { category: "Étel", puzzle: "SUSHI", hints: ["Japán étel, amely ecetes rizsből és különféle feltétekből áll.", "Gyakran nyers hallal, tengeri herkentyűkkel vagy zöldségekkel készítik."] },
    { category: "Híres Magyar", puzzle: "NEUMANN JÁNOS", hints: ["A számítógép atyjaként emlegetett magyar matematikus.", "Jelentős szerepet játszott a játékelmélet és a digitális számítógépek fejlesztésében."] },
    { category: "Televíziós Műsor", puzzle: "DELTA", hints: ["Régi magyar tudományos-ismeretterjesztő műsor.", "Jellegzetes elektronikus főcímzenéje volt."] },
    { category: "Édesség", puzzle: "Feketeerdő-torta", hints: ["Német eredetű, csokoládés-meggyes-tejszínes tortakülönlegesség.", "Nevét a cseresznyepálinkáról kapta, amivel ízesítik."] },
    { category: "Foglalkozás", puzzle: "TŰZOLTÓ", hints: ["Tüzeket olt, és műszaki mentéseket végez.", "Szent Flórián a védőszentjük."] },
    { category: "Mitológia", puzzle: "PERZEUSZ", hints: ["Görög hős, aki legyőzte Medúzát, a gorgót.", "Pegazus, a szárnyas ló a segítségére volt."] },
    { category: "Étel", puzzle: "BRYNDZOVÉ HALUSKY", hints: ["Juhtúrós galuska, a szlovák konyha nemzeti étele.", "Tetejére gyakran szalonnapörcöt szórnak."] },
    { category: "Híres Személy", puzzle: "JANE GOODALL", hints: ["Brit csimpánzkutató és antropológus.", "Életét a csimpánzok viselkedésének és védelmének szentelte."] },
    { category: "Közmondás", puzzle: "JOBB FÉLNI MINT MEGIJEDNI", hints: ["Az óvatosság sosem árt.", "Érdemesebb felkészülni a rosszra, mint meglepődni rajta."] },
    { category: "Szólás", puzzle: "KÍVÁNCSI MINT A BÖDÖS BANKA", hints: ["Nagyon indiszkrét, minden érdekli.", "Egy madár nevéhez kötik a túlzott érdeklődést."] },
    { category: "Közmondás", puzzle: "VAK TYÚK IS TALÁL SZEMET", hints: ["Még a legszerencsétlenebb embernek is lehet néha szerencséje.", "A véletlen is a kezére játszhat valakinek."] },
    { category: "Szólás", puzzle: "NEM BABRA MEGY A JÁTÉK", hints: ["Komoly a tét, nagy a felelősség.", "Nem apróság forog kockán."] },
    { category: "Közmondás", puzzle: "AKI A KICSIT NEM BECSÜLI A NAGYOT NEM ÉRDEMLI", hints: ["Az apró dolgoknak is örülni kell.", "Hálásnak kell lenni a kisebb sikerekért is."] },
    { category: "Szólás", puzzle: "BELEÜTÖTTE AZ ORRÁT", hints: ["Olyasmibe ártotta magát, amihez semmi köze.", "Nem kért tanácsot adott, vagy beleszólt valamibe."] },
    { category: "Közmondás", puzzle: "SOK LÚD DISZNÓT GYŐZ", hints: ["A túlerővel szemben a legerősebb is tehetetlen.", "A mennyiség felülkerekedhet a minőségen."] },
    { category: "Szólás", puzzle: "ELVETETTE A SULYкот", hints: ["Túlzásba vitt valamit, túl messzire ment.", "Átlépett egy határt."] },
    { category: "Közmondás", puzzle: "AZ OKOS ENGED A SZAMÁR SZENVED", hints: ["Néha bölcsebb dolog elkerülni a vitát.", "Nem érdemes mindenáron ragaszkodni az igazunkhoz egy makacs emberrel szemben."] },
    { category: "Szólás", puzzle: "ITT A KUTYA ELÁSVA", hints: ["Ez a dolog valódi, rejtett oka.", "Rájöttek a probléma gyökerére."] },
    { category: "Közmondás", puzzle: "AJÁNDÉK LÓNAK NE NÉZD A FOGÁT", hints: ["Amit ingyen kapunk, abban nem illik hibát keresni.", "Örülni kell az ajándéknak, bármilyen is az."] },
    { category: "Szólás", puzzle: "NEM FESTI AZ ÖRDÖGÖT A FALRA", hints: ["Nem szabad a legrosszabbra gondolni, előre aggódni.", "Ne idézzük meg a bajt a félelmünkkel."] },
    { category: "Közmondás", puzzle: "ADDIG JÁR A KORSÓ A KÚTRA MÍG EL NEM TÖRIK", hints: ["A kockázatos cselekedeteknek egyszer rossz vége lesz.", "Nem lehet a végtelenségig kihívni a sorsot."] },
    { category: "Szólás", puzzle: "EGYIK KUTYA MÁSIK EB", hints: ["Nincs különbség két rossz dolog vagy ember között.", "Alapvetően ugyanolyanok, hiába tűnnek másnak."] },
    { category: "Közmondás", puzzle: "SOK JÓ EMBER KIS HELYEN IS ELFÉR", hints: ["A jó szándékú emberek szűkös körülmények között is jól kijönnek egymással.", "A szeretet és az alkalmazkodás a fontos."] },
    { category: "Film", puzzle: "ÜVEGTIGRIS", hints: ["Egy út menti büfé körül bonyolódnak az események.", "Lali, Cingi, Gaben és Csoki kalandjai."] },
    { category: "Film", puzzle: "VISSZA A JÖVŐBE", hints: ["Egy DeLorean segítségével utaznak az időben.", "Marty McFly és Doki Brown kalandjai."] },
    { category: "TV Műsor", puzzle: "FRIDERIKUSZ SHOW", hints: ["A 90-es évek legnépszerűbb magyar talk show-ja.", "A műsorvezető jellegzetes hangjáról és kérdéseiről volt ismert."] },
    { category: "Film", puzzle: "A GYŰRŰK URA", hints: ["Egy hobbit kalandos útja Mordorba, hogy elpusztítson egy hatalmas erejű tárgyat.", "J.R.R. Tolkien fantasy regényének filmadaptációja."] },
    { category: "TV Sorozat", puzzle: "TRÓNOK HARCA", hints: ["Westeros nemesi családjainak küzdelme a Vastrónért.", "Sárkányok, mások és árulások története."] },
    { category: "Film", puzzle: "KONTROLL", hints: ["A budapesti metróellenőrök világában játszódó kultuszfilm.", "Antal Nimród rendezte, Csányi Sándor főszereplésével."] },
    { category: "TV Műsor", puzzle: "LEGYEN ÖN IS MILLIOMOS", hints: ["Vágó István vezette kvízműsor, ahol 15 kérdés vezet a főnyereményhez.", "A 'Megáll' és a 'Kérdezze a közönséget' opciók itt voltak."] },
    { category: "Film", puzzle: "A REMÉNY RABJAI", hints: ["Egy bankár története, akit ártatlanul ítélnek el a Shawshank börtönben.", "Az IMDb ranglistájának állandó éllovasa."] },
    { category: "TV Sorozat", puzzle: "BREAKING BAD", hints: ["Egy kémiatanár metamfetamin főzésbe kezd, miután rákot diagnosztizálnak nála.", "Walter White és Jesse Pinkman története."] },
    { category: "Film", puzzle: "CSAPATLECSÓ", hints: ["Egy patkány, aki séf szeretne lenni Párizsban.", "A Pixar animációs filmjének mottója: 'Főzni bárki tud!'"] },
    { category: "TV Sorozat", puzzle: "A MI KIS FALUNK", hints: ["Egy fiktív magyar falu, Pajkaszeg mindennapjait mutatja be.", "Stoki, Erika és a polgármester kalandjai."] },
    { category: "Film", puzzle: "AZ ÖTÖDIK ELEM", hints: ["Bruce Willis taxisofőrt alakít egy futurisztikus sci-fi-ben.", "Luc Besson filmje, Milla Jovovich főszereplésével."] },
    { category: "TV Műsor", puzzle: "GÁLVÖLGYI SHOW", hints: ["A 80-as és 90-es évek népszerű magyar szkeccsműsora.", "A műsorvezető számos hírességet parodizált ki."] },
    { category: "Film", puzzle: "FORREST GUMP", hints: ["Egy alacsony intelligenciájú, de jószívű férfi rendkívüli élete.", "'Az élet olyan, mint egy doboz bonbon...'"] },
    { category: "TV Sorozat", puzzle: "FEKETE TÜKÖR", hints: ["Modern antológia sorozat a technológia sötét oldaláról.", "Minden epizód egy különálló, elgondolkodtató történet."] },
    { category: "Együttes", puzzle: "QUEEN", hints: ["Freddie Mercury volt a legendás frontembere.", "A 'Bohemian Rhapsody' és a 'We Will Rock You' is az ő daluk."] },
    { category: "Dalcím", puzzle: "HOTEL CALIFORNIA", hints: ["Az Eagles együttes leghíresebb, rejtélyes szövegű dala.", "'You can check out any time you like, but you can never leave...'"] },
    { category: "Előadó", puzzle: "ZÁMBÓ JIMMY", hints: ["A 'Király' becenévvel illették.", "'Nézz le rám, ó Istenem' az egyik legismertebb dala."] },
    { category: "Együttes", puzzle: "TANKCSAPDA", hints: ["Debreceni rockzenekar, Lukács Laci a frontembere.", "'Mennyország tourist' és 'A rock & roll rugója' is az ő szerzeményük."] },
    { category: "Dalcím", puzzle: "DESPACITO", hints: ["Luis Fonsi és Daddy Yankee 2017-es világslágere.", "A YouTube egyik legnézettebb videoklipje."] },
    { category: "Előadó", puzzle: "MICHAEL JACKSON", hints: ["A 'Pop Királya', híres volt a moonwalk táncáról.", "'Thriller', 'Billie Jean', 'Beat It' a legnagyobb slágerei."] },
    { category: "Együttes", puzzle: "KFT", hints: ["A 'Bábu vagy' és az 'Afrika, paprika' című dalokról ismertek.", "Laár András és Bornai Tibor a zenekar tagjai."] },
    { category: "Dalcím", puzzle: "NYÁRI ESTE", hints: ["A Cotton Club Singers dala, amely a swing korszakot idézi.", "Négy énekes adja elő, gyakran hallható rádiókban."] },
    { category: "Előadó", puzzle: "KOVÁCS KATI", hints: ["Kossuth-díjas magyar énekesnő, a beatkorszak ikonja.", "'Most kéne abbahagyni' és 'Ha legközelebb látlak' a slágerei."] },
    { category: "Együttes", puzzle: "NIRVANA", hints: ["A grunge zenei stílus úttörője Kurt Cobain vezetésével.", "'Smells Like Teen Spirit' a leghíresebb daluk."] },
    // === IRODALOM (CSOMAG 2) ===
    { category: "Könyvcím", puzzle: "BŰN ÉS BŰNHŐDÉS", hints: ["Dosztojevszkij regénye egy diákról, aki megöl egy uzsorás asszonyt.", "Raszkolnyikov a főszereplő."] },
    { category: "Irodalmi Szereplő", puzzle: "HARRY POTTER", hints: ["Egy fiatal varázsló, aki a Roxfortban tanul.", "J.K. Rowling regénysorozatának főhőse."] },
    { category: "Író", puzzle: "JÓKAI MÓR", hints: ["A 'nagy magyar mesemondó', a romantika korának írója.", "Többek között 'Az arany ember' és 'A kőszívű ember fiai' szerzője."] },
    { category: "Könyvcím", puzzle: "A KIS HERCEG", hints: ["Antoine de Saint-Exupéry filozofikus meseregénye.", "'Jól csak a szívével lát az ember. Ami igazán lényeges, az a szemnek láthatatlan.'"] },
    { category: "Irodalmi Szereplő", puzzle: "ODÜSSZEUSZ", hints: ["Görög hős, Ithaka királya, aki tíz évig bolyongott a tengeren.", "Homérosz eposzának főszereplője."] },
    { category: "Költő", puzzle: "PETŐFI SÁNDOR", hints: ["Az 1848-as forradalom költője, a 'Nemzeti dal' szerzője.", "Felesége Szendrey Júlia volt."] },
    { category: "Könyvcím", puzzle: "SZÁZ ÉV MAGÁNY", hints: ["Gabriel García Márquez mágikus realizmussal átszőtt regénye.", "A Buendía család történetét meséli el."] },
    { category: "Irodalmi Szereplő", puzzle: "JÁNOS VITÉZ", hints: ["Petőfi Sándor elbeszélő költeményének főhőse, Kukorica Jancsi.", "Iluskáért és a kalandokért él."] },
    { category: "Író", puzzle: "AGATHA CHRISTIE", hints: ["A 'krimi királynője', Hercule Poirot és Miss Marple megalkotója.", "Több mint 60 detektívregényt írt."] },
    { category: "Könyvcím", puzzle: "TIZENÖT ÉVES KAPITÁNY", hints: ["Jules Verne kalandregénye egy fiatal fiúról, aki egy hajó irányítására kényszerül.", "Dick Sand a főszereplő."] },
    
    // === FÖLDRAJZ (CSOMAG 2) ===
    { category: "Világváros", puzzle: "TOKIÓ", hints: ["Japán fővárosa, a világ egyik legnépesebb metropolisza.", "Híres a Shibuya kereszteződésről és a csúcstechnológiáról."] },
    { category: "Magyar Folyó", puzzle: "TISZA", hints: ["Magyarország második legnagyobb folyója, a 'szőke' jelzővel illetik.", "A Kárpátokban ered és a Dunába torkollik."] },
    { category: "Híres Tér", puzzle: "TIMES SQUARE", hints: ["New York leghíresebb, neonfényes tere.", "A szilveszteri gömb leeresztéséről ismert."] },
    { category: "Ország", puzzle: "AUSZTRÁLIA", hints: ["Kontinens és ország is egyben, a kenguruk és koalák otthona.", "Fővárosa Canberra, de legnagyobb városa Sydney."] },
    { category: "Hegység", puzzle: "HIMalája", hints: ["Itt található a Föld legmagasabb csúcsa, a Mount Everest.", "Ázsia déli részén húzódik."] },
    { category: "Magyar Város", puzzle: "SZEGED", hints: ["A napfény városa, híres a paprikájáról és a Dóm térről.", "A Tisza partján fekszik."] },
    { category: "Sziget", puzzle: "MADAGASZKÁR", hints: ["Afrika partjainál fekvő szigetország, a lemurok hazája.", "Az animációs film is itt játszódik."] },
    { category: "Világváros", puzzle: "MOSZKVA", hints: ["Oroszország fővárosa, a Vörös tér és a Kreml otthona.", "Híres a hagymakupolás Szent Vazul-székesegyházról."] },
    { category: "Természeti Csoda", puzzle: "NIAGARA-VÍZESÉS", hints: ["Hatalmas vízesésrendszer az USA és Kanada határán.", "Népszerű turistalátványosság és nászutas célpont."] },
    { category: "Magyar Tájegység", puzzle: "ŐRSÉG", hints: ["Nyugat-Magyarországon található, szerekből álló településszerkezetéről ismert.", "Híres a tökmagolajról és a fazekasságról."] },

    // === MÁRKANÉV ÉS TERMÉK (CSOMAG 2) ===
    { category: "Márkanév", puzzle: "COCA-COLA", hints: ["A világ legismertebb üdítőital-márkája.", "A receptje a világ egyik legjobban őrzött titka."] },
    { category: "Retro Termék", puzzle: "SZÓDÁSSZIFON", hints: ["Üvegpalack fém fejjel, szódavíz készítésére használták.", "Patron kellett a működéséhez."] },
    { category: "Márkanév", puzzle: "IKEA", hints: ["Svéd bútoráruház, a lapra szerelt bútorokról ismert.", "Híres a húsgolyóiról is."] },
    { category: "Retro Márka", puzzle: "ORION", hints: ["Régi magyar elektronikai márka, főleg TV-ket és rádiókat gyártott.", "A logójában egy csillagkép látható."] },
    { category: "Márkanév", puzzle: "LEGO", hints: ["Dán építőjáték, amely egymásba illeszthető műanyag elemekből áll.", "A neve a 'leg godt' dán kifejezésből ered, ami azt jelenti: 'játssz jól'."] },
    { category: "Retro Termék", puzzle: "TÁRCSÁS TELEFON", hints: ["Régi típusú telefon, ahol az ujjunkkal kellett forgatni egy tárcsát a számok beírásához.", "Jellegzetes kerregő hangja volt."] },
    { category: "Márkanév", puzzle: "GOOGLE", hints: ["A világ legnépszerűbb keresőmotorja.", "A nevéből származik az 'utánanéz' szinonimája."] },
    { category: "Retro Márka", puzzle: "BIOTEX", hints: ["Enzimes áztató- és mosószer a 80-as évekből.", "A makacs foltok eltávolítására reklámozták."] },
    { category: "Márkanév", puzzle: "PREZI", hints: ["Magyar alapítású prezentációs szoftver.", "Nem lineáris, hanem egy nagy vásznon mozogva mutatja be a tartalmat."] },
    { category: "Retro Termék", puzzle: "DIANA SÓS PÁLCIKA", hints: ["Klasszikus magyar ropogtatnivaló, sós ízben.", "A zacskóján egy mosolygós lány látható."] },
    
    // === JÁRMŰVEK ===
    { category: "Jármű", puzzle: "IKARUS BUSZ", hints: ["Legendás magyar buszmárka, a szocializmus ikonja.", "A csuklós változatait 'harmónikásnak' is nevezték."] },
    { category: "Autómárka", puzzle: "VOLKSWAGEN", hints: ["Német autómárka, a neve 'népautót' jelent.", "A Bogár és a Golf a legismertebb modelljei."] },
    { category: "Jármű", puzzle: "ZSIGULI", hints: ["Szovjet autó, a Lada márka elődje Magyarországon.", "Gyakran 'ezerkettes' vagy 'ezerötös' néven emlegették."] },
    { category: "Repülőgép", puzzle: "BOEING HETES-NÉGYES-HETES", hints: ["A 'Jumbo Jet' becenevű, púpos törzsű utasszállító repülőgép.", "Az egyik legismertebb és legnagyobb repülőgép volt évtizedekig."] },
    { category: "Hajótípus", puzzle: "TITANIC", hints: ["Elsüllyeszthetetlennek tartott óceánjáró, amely 1912-ben jéghegynek ütközött.", "A történetéből híres film is készült."] },

    // === SZÁMÍTÁSTECHNIKA ÉS INTERNET ===
    { category: "Internet", puzzle: "KÉK HALÁL", hints: ["A Windows operációs rendszerek súlyos hibaüzenete.", "Amikor megjelenik, a számítógép általában újraindul."] },
    { category: "Szoftver", puzzle: "PHOTOSHOP", hints: ["Az Adobe képszerkesztő programja.", "A neve a digitális képmanipuláció szinonimájává vált."] },
    { category: "Internet", puzzle: "MÉM", hints: ["Az interneten gyorsan terjedő, humoros kép, videó vagy szöveg.", "Gyakran aktuális eseményekre reflektál."] },
    { category: "Hardver", puzzle: "FLOPPY LEMEZEK", hints: ["Mágneses adathordozó, a 90-es években volt elterjedt.", "Kapacitása mindössze 1,44 megabájt volt."] },
    { category: "Szolgáltatás", puzzle: "FELHŐALAPÚ SZOLGÁLTATÁS", hints: ["Adatok és programok tárolása és futtatása az interneten keresztül.", "Például a Google Drive vagy a Dropbox."] },

    // === HOBBI ÉS SZABADIDŐ ===
    { category: "Társasjáték", puzzle: "MONOPOLY", hints: ["Ingatlan-kereskedelmi társasjáték, ahol a cél a többi játékos csődbe juttatása.", "A Váci utca és a Margit-sziget is megvásárolható benne."] },
    { category: "Kártyajáték", puzzle: "ULTI", hints: ["Magyar kártyajáték, amelyet általában hárman játszanak Tell-lapokkal.", "A licitálás és a kontrázás a lényege."] },
    { category: "Hobbi", puzzle: "BÉLYEGGYŰJTÉS", hints: ["Postai értékcikkek tematikus gyűjtése.", "Filatéliának is nevezik."] },
    { category: "Társasjáték", puzzle: "CATAN TELEPESEI", hints: ["Népszerű stratégiai társasjáték, ahol nyersanyagokat kell gyűjteni és településeket építeni.", "A játékosok kereskedhetnek egymással."] },
    { category: "Szabadidő", puzzle: "SZABADULÓSZOBA", hints: ["Logikai és ügyességi feladatok megoldásával kell kijutni egy bezárt helyiségből.", "A csapatmunkára épül, általában egy óra áll rendelkezésre."] },

    // === ABSZTRAKT FOGALMAK ===
    { category: "Fogalom", puzzle: "KÁRÖRÖM", hints: ["Mások baján, kudarcán való örvendezés.", "A német 'Schadenfreude' szó magyar megfelelője."] },
    { category: "Érzés", puzzle: "NOSZTALGIA", hints: ["A múlt iránti vágyakozás, egyfajta édes-bús érzés.", "Akkor érezzük, amikor régi fényképeket nézegetünk."] },
    { category: "Fogalom", puzzle: "DÉJÀ VU", hints: ["Az az érzés, amikor úgy érezzük, hogy egy új helyzetet már átéltünk korábban.", "Francia kifejezés, jelentése: 'már látott'."] },
    { category: "Elv", puzzle: "KARMA", hints: ["A tett és következmény törvénye a keleti vallásokban.", "Eszerint minden cselekedetünk visszahat ránk."] },
    { category: "Fogalom", puzzle: "JIN ÉS JANG", hints: ["Két ellentétes, de egymást kiegészítő erő a kínai filozófiában.", "A sötét és a világos, a női és a férfi princípiumot jelképezi."] },
    // === KÖZMONDÁSOK ÉS SZÓLÁSOK (CSOMAG 3) ===
{ category: "Közmondás", puzzle: "AKINEK NEM INGE NE VEGYE MAGÁRA", hints: ["Aki nem érintett a dologban, ne sértődjön meg.", "A kritika csak annak szól, akire vonatkozik."] },
{ category: "Szólás", puzzle: "SE FÜLE SE FARKA", hints: ["Értelmetlen, összefüggéstelen dolog.", "Nincs semmi logikus eleje vagy vége."] },
{ category: "Közmondás", puzzle: "A REST KÉTSZER FÁRAD", hints: ["A rosszul, kapkodva elvégzett munkát újra el kell végezni.", "Érdemes elsőre rendesen megcsinálni a dolgokat."] },
{ category: "Szólás", puzzle: "TÚL LŐ A CÉLON", hints: ["Túlzásba esik, többet tesz a kelleténél.", "Az eredeti szándékánál messzebbre jut."] },
{ category: "Közmondás", puzzle: "AZ ÜRES HORDÓ HANGOSABBAN KONG", hints: ["Az ostoba, tudatlan emberek szeretnek a leghangosabban beszélni.", "Aki keveset tud, az szeret kérkedni."] },
{ category: "Szólás", puzzle: "KARDJÁBA DŐL", hints: ["Saját maga okozza a vesztét.", "A saját tetteinek áldozatává válik."] },
{ category: "Közmondás", puzzle: "REND A LELKE MINDENNEK", hints: ["A szervezettség és a tisztaság fontos a hatékonysághoz.", "A káoszban nem lehet jól működni."] },
{ category: "Szólás", puzzle: "FAFEJŰ", hints: ["Makacs, nehéz felfogású ember.", "Nehezen lehet meggyőzni bármiről."] },
{ category: "Közmondás", puzzle: "KICSINY A BORS DE ERŐS", hints: ["A kis termetű ember is lehet talpraesett és bátor.", "Nem szabad a külső alapján ítélni."] },
{ category: "Szólás", puzzle: "EGYIK TÜZET A MÁSIKKAL OLTJA", hints: ["Egyik bajból egy másikkal próbál kikeveredni.", "Rossz megoldást választ egy problémára."] },
{ category: "Közmondás", puzzle: "A TÜRELEM RÓZSÁT TEREM", hints: ["A kitartó várakozás meghozza a gyümölcsét.", "Nem szabad elsietni a dolgokat."] },
{ category: "Szólás", puzzle: "LEESETT AZ ÁLLA", hints: ["Nagyon meglepődött, elcsodálkozott.", "Nem hitt a szemének vagy a fülének."] },
{ category: "Közmondás", puzzle: "A BAJ NEM JÁR EGYEDÜL", hints: ["A problémák gyakran halmozottan jelentkeznek.", "Ha egy rossz dolog történik, gyakran követi egy másik."] },
{ category: "Szólás", puzzle: "MEGTÖRT A JÉG", hints: ["A kezdeti feszültség, ridegség feloldódott.", "Elindult a kommunikáció, barátságosabb lett a légkör."] },
{ category: "Közmondás", puzzle: "AMELYIK KUTYA UGAT AZ NEM HARAP", hints: ["Aki hangosan fenyegetőzik, általában nem tesz semmit.", "A tettek hangosabbak a szavaknál."] },
{ category: "Szólás", puzzle: "ZÖLD ÁGRA VERGŐDIK", hints: ["Sikeres lesz, boldogul az életben.", "Rendeződik az anyagi helyzete."] },
{ category: "Közmondás", puzzle: "LASSÚ VÍZ PARTOT MOS", hints: ["Kitartó, aprólékos munkával is nagy eredményt lehet elérni.", "A türelem és a kitartás végül célra vezet."] },
{ category: "Szólás", puzzle: "NEM AZ ÉN ASZTALOM", hints: ["Nem értek hozzá, nem az én hatásköröm.", "Nem tartozik a feladataim közé."] },
{ category: "Közmondás", puzzle: "INÁBA SZÁLLT A BÁTORSÁGA", hints: ["Megijedt, megfutamodott.", "Elhagyta a bátorsága egy nehéz helyzetben."] },
{ category: "Szólás", puzzle: "FELKÖTÖTTE A GATYÁJÁT", hints: ["Nagy elszánással nekikészült egy nehéz feladatnak.", "Komolyan vette a kihívást."] },
{ category: "Közmondás", puzzle: "NINCS RÓZSA TÖVIS NÉLKÜL", hints: ["A jó dolgoknak is megvan a maguk nehézsége, árnyoldala.", "A szépségért és a sikerért gyakran meg kell küzdeni."] },
{ category: "Szólás", puzzle: "KERÜLI MINT MACSKA A FORRÓ KÁSÁT", hints: ["Óvatosan közelít egy kényes témához, nem mer belevágni.", "Halogatja a kellemetlen feladatot."] },
{ category: "Közmondás", puzzle: "AKI KORPA KÖZÉ KEVEREDIK MEGESZIK A DISZNÓK", hints: ["Aki rossz társaságba keveredik, maga is rossz hírű lesz.", "Az emberre hatással van a környezete."] },
{ category: "Szólás", puzzle: "NEM ESZI OLYAN FORRÓN A KÁSÁT", hints: ["A helyzet nem annyira súlyos, mint amilyennek elsőre látszik.", "Nem kell annyira megijedni tőle."] },
{ category: "Közmondás", puzzle: "JOBB KÉSŐN MINT SOHA", hints: ["Még ha megkésve is, de érdemes megtenni a helyes dolgot.", "A mulasztás pótlása is jobb a semminél."] },
{ category: "Szólás", puzzle: "ORDÍT MINT A SAKÁL", hints: ["Nagyon hangosan, fülsértően kiabál.", "Erőteljes, kellemetlen hangot ad ki."] },
{ category: "Közmondás", puzzle: "A GYAKORLAT TESZI A MESTERT", hints: ["A sok ismétlés és a kitartó munka hozza meg a tudást és a sikert.", "A tehetség önmagában nem elég."] },
{ category: "Szólás", puzzle: "LEVAN A GONDJA RÓLA", hints: ["Már nem kell foglalkoznia vele, megoldódott a probléma.", "Megszabadult egy tehertől."] },
{ category: "Közmondás", puzzle: "KÉT RÖSTÖN KÉNE ÁTVERNI", hints: ["Nagyon agyafúrt, ravasz ember.", "Nem lehet könnyen becsapni."] },
{ category: "Szólás", puzzle: "NEM SOK KÖSZÖNET VAN BENNE", hints: ["Hálátlan feladat, amiért nem jár elismerés.", "Nem érdemes fáradozni vele."] },

// === FILM ÉS TV (CSOMAG 3) ===
{ category: "Film", puzzle: "JURASSIC PARK", hints: ["Egy milliárdos dinoszauruszokat klónoz egy szigeten.", "Steven Spielberg filmje, ahol a tudomány elszabadul."] },
{ category: "TV Sorozat", puzzle: "A NAGY PÉNZRABLÁS", hints: ["Egy csapat bűnöző a spanyol királyi pénzverdét akarja kirabolni.", "A szereplők városneveket viselnek álnévként."] },
{ category: "Film", puzzle: "HAMIS A BABA", hints: ["Bujtor István filmje, Ötvös Csöpi a Balatonon nyomoz.", "Egy értékes szobor körül forognak az események."] },
{ category: "TV Sorozat", puzzle: "SZEX ÉS NEW YORK", hints: ["Négy barátnő szerelmi életét és kalandjait követi a nagyvárosban.", "Carrie Bradshaw és a Cosmopolitan koktélok."] },
{ category: "Film", puzzle: "GLADIÁTOR", hints: ["Egy római tábornokból rabszolga, majd hős gladiátor lesz.", "Russell Crowe Oscar-díjas alakítása, Ridley Scott rendezésében."] },
{ category: "TV Sorozat", puzzle: "A KLINIKA", hints: ["Német kórházsorozat a Fekete-erdőből.", "Brinkmann professzor volt a főszereplője."] },
{ category: "Film", puzzle: "A KARIB-TENGER KALÓZAI", hints: ["Johnny Depp egy különc és vicces kalózkapitányt alakít.", "Jack Sparrow kapitány és a Fekete Gyöngy átka."] },
{ category: "TV Sorozat", puzzle: "DALLAS", hints: ["Egy texasi olajmágnás család, a Ewingok története.", "Jockey Ewing volt a sorozat ikonikus gonosza."] },
{ category: "Film", puzzle: "AZ ODAÁT", hints: ["Patrick Swayze szellemként próbálja megmenteni szerelmét.", "Whoopi Goldberg Oscar-díjat kapott a filmben nyújtott alakításáért."] },
{ category: "TV Sorozat", puzzle: "AZ X-AKTÁK", hints: ["Két FBI-ügynök paranormális jelenségek után nyomoz.", "Mulder és Scully kalandjai, a szlogen: 'Az igazság odaát van'."] },
{ category: "Film", puzzle: "CSOKIT VAGY CSALUNK", hints: ["Egy elvált apuka átváltozik idős dadussá, hogy a gyerekeivel lehessen.", "Robin Williams felejthetetlen alakítása."] },
{ category: "TV Sorozat", puzzle: "A TETTHELY", hints: ["Német krimisorozat, amely különböző városok nyomozóinak munkáját mutatja be.", "Schimanski felügyelő volt az egyik legismertebb karaktere."] },
{ category: "Film", puzzle: "AZ ÖRDÖG PRADÁT VISEL", hints: ["Egy fiatal lány asszisztens lesz egy rettegett divatmagazin főszerkesztője mellett.", "Meryl Streep és Anne Hathaway főszereplésével."] },
{ category: "TV Sorozat", puzzle: "MIZÚJS, WAGNER ÚR?", hints: ["Magyar vígjátéksorozat egy iskolaigazgatóról és a tanári karáról.", "Benedek Miklós játszotta a címszerepet."] },
{ category: "Film", puzzle: "A WALL STREET FARKASA", hints: ["Egy bróker felemelkedése és bukása a féktelen pénzügyi világban.", "Leonardo DiCaprio és Martin Scorsese filmje."] },
{ category: "TV Sorozat", puzzle: "VÉSZHELYZET", hints: ["Egy chicagói kórház sürgősségi osztályának mindennapjai.", "George Clooney ezzel a sorozattal lett világhírű."] },
{ category: "Film", puzzle: "AZ ÉLET SZÉP", hints: ["Egy zsidó apa a koncentrációs táborban is próbálja megőrizni kisfia életkedvét.", "Roberto Benigni Oscar-díjas filmje."] },
{ category: "TV Sorozat", puzzle: "REX FELÜGYELŐ", hints: ["Egy németjuhász kutya, aki a bécsi rendőrségnek segít a bűnügyek megoldásában.", "A szalámis zsemle volt a kedvence."] },
{ category: "Film", puzzle: "A ZONGORISTA", hints: ["Egy lengyel zsidó zongoraművész túlélése a második világháború alatt Varsóban.", "Adrien Brody Oscar-díjas alakítása, Roman Polanski rendezésében."] },
{ category: "TV Sorozat", puzzle: "A KORONA", hints: ["A brit királyi család és II. Erzsébet királynő uralkodásának története.", "A Netflix egyik legsikeresebb sorozata."] },
{ category: "Film", puzzle: "A NAGY KÉKSÉG", hints: ["Két szabadtüdős búvár barátságáról és versengéséről szól.", "Luc Besson filmje, lenyűgöző víz alatti felvételekkel."] },
{ category: "TV Sorozat", puzzle: "COLUMBO", hints: ["Egy látszólag lassú és szórakozott, de valójában zseniális nyomozó.", "Peter Falk ikonikus szerepe, a ballonkabát és a 'Csak még egy kérdés'."] },
{ category: "Film", puzzle: "A KAPCSOLAT", hints: ["Egy csillagász rádiójeleket fog egy idegen civilizációtól.", "Jodie Foster főszereplésével, Carl Sagan regénye alapján."] },
{ category: "TV Sorozat", puzzle: "A HIVATAL", hints: ["Egy papírgyár mindennapjait bemutató áldokumentumfilm-sorozat.", "Michael Scott, a különc főnök vezetésével."] },
{ category: "Film", puzzle: "RYAN KÖZLEGÉNY MEGMENTÉSE", hints: ["A normandiai partraszállás után egy csapat katonát küldenek egy eltűnt közlegény felkutatására.", "Steven Spielberg háborús filmje Tom Hanks főszereplésével."] },
{ category: "TV Sorozat", puzzle: "A VEZÉRCSEL", hints: ["Egy árva lányból a világ legjobb sakkozója lesz a hidegháború idején.", "Anya Taylor-Joy főszereplésével készült minisorozat."] },
{ category: "Film", puzzle: "A TÖKÉLETES TRÜKK", hints: ["Két bűvész rivalizálása a 19. századi Londonban.", "Christopher Nolan filmje Hugh Jackman és Christian Bale főszereplésével."] },
{ category: "TV Sorozat", puzzle: "DOKTOR HOUSE", hints: ["Egy zseniális, de cinikus diagnoszta és csapata old meg rejtélyes orvosi eseteket.", "Hugh Laurie ikonikus szerepe."] },
{ category: "Film", puzzle: "AZ", hints: ["Egy csapat gyerek szembeszáll egy gonosz, alakváltó bohóccal.", "Stephen King regényének feldolgozása, Pennywise a főgonosz."] },
{ category: "TV Sorozat", puzzle: "STRANGER THINGS", hints: ["Egy kisfiú eltűnése után egy telekinetikus képességekkel rendelkező lány bukkan fel.", "A 80-as évek popkultúrája előtt tisztelgő Netflix sorozat."] },

// === ZENE ÉS ELŐADÓK (CSOMAG 3) ===
{ category: "Dalcím", puzzle: "BOHEMIAN RHAPSODY", hints: ["A Queen együttes hatperces, operai elemekkel tűzdelt rockhimnusza.", "A szövegében Scaramouche és a Fandango is szerepel."] },
{ category: "Előadó", puzzle: "ELVIS PRESLEY", hints: ["A Rock and Roll Királya, a 20. század egyik legmeghatározóbb kulturális ikonja.", "Híres volt a csípőmozgásáról és a 'Jailhouse Rock'-ról."] },
{ category: "Együttes", puzzle: "EDDA MŰVEK", hints: ["Pataky Attila vezette miskolci rockegyüttes.", "'A kör' és az 'Éjjel érkezem' a legismertebb dalaik közé tartoznak."] },
{ category: "Dalcím", puzzle: "BILLIE JEAN", hints: ["Michael Jackson egyik legnagyobb slágere, amelyben egy zaklató rajongóról énekel.", "A dalhoz tartozó videoklipben a járda világít a lába alatt."] },
{ category: "Előadó", puzzle: "MADONNA", hints: ["A Pop Királynője, aki a 80-as évek óta folyamatosan meg tud újulni.", "'Like a Virgin' és a 'Vogue' a leghíresebb dalai."] },
{ category: "Együttes", puzzle: "KISPÁL ÉS A BORZ", hints: ["Pécsi alternatív rockzenekar, Lovasi András volt a frontembere.", "'Ha az életben' és a 'Csillag vagy fecske' is az ő daluk."] },
{ category: "Dalcím", puzzle: "AZT BESZÉLIK A LÁNYOK", hints: ["Zalatnay Sarolta egyik legismertebb, energikus dala.", "A refrénje gyakran hangzik el retro bulikban."] },
{ category: "Előadó", puzzle: "Cserháti Zsuzsa", hints: ["Különleges, mély hangú magyar énekesnő.", "'Édes kisfiam' és a 'Hamu és gyémánt' a legismertebb dalai."] },
{ category: "Együttes", puzzle: "KORÁL", hints: ["Balázs Fecó vezette magyar rockegyüttes.", "'Maradj velem' és a 'Homok a szélben' a legismertebb lírai dalaik."] },
{ category: "Dalcím", puzzle: "WONDERWALL", hints: ["Az Oasis együttes legismertebb, akusztikus gitárra épülő dala.", "A 90-es évek britpop himnusza."] },
{ category: "Előadó", puzzle: "SZŰCS JUDIT", hints: ["A magyar diszkókirálynő.", "'Táncolj még!' című dala a legismertebb slágere."] },
{ category: "Együttes", puzzle: "30Y", hints: ["Pécsi alternatív rockzenekar, Beck Zoltán a frontembere.", "'Bogozd ki' és az 'Egypár' a legismertebb dalaik."] },
{ category: "Dalcím", puzzle: "AZOK A BOLDOG SZÉP NAPOK", hints: ["Beatrice-dal, amely a régi időkre emlékezik.", "Gyakran éneklik szurkolói csoportok is."] },
{ category: "Előadó", puzzle: "LADY GAGA", hints: ["Extravagáns megjelenéséről és erőteljes hangjáról ismert amerikai popsztár.", "'Poker Face' és a 'Bad Romance' hozta meg neki a világhírnevet."] },
{ category: "Együttes", puzzle: "ROLLING STONES", hints: ["Brit rockegyüttes, Mick Jagger a karizmatikus frontembere.", "A logójuk egy kinyújtott nyelv."] },
{ category: "Dalcím", puzzle: "SZERELEM, MIÉRT MÚLSZ?", hints: ["Wolf Kati dala, amellyel az Eurovíziós Dalfesztiválon is szerepelt.", "Egy modern, de retro hangulatú sláger."] },
{ category: "Előadó", puzzle: "KONCZ ZSUZSA", hints: ["Kossuth-díjas énekesnő, a magyar beat-korszak kiemelkedő alakja.", "'Ha én rózsa volnék' az egyik legismertebb dala."] },
{ category: "Együttes", puzzle: "MUSE", hints: ["Angol rockegyüttes, amely a grandiózus hangzásáról és élő koncertjeiről ismert.", "'Uprising' és a 'Starlight' a legismertebb dalaik."] },
{ category: "Dalcím", puzzle: "ÚGY SZERETNÉK BOLDOG LENNI", hints: ["Az 'Egy szoknya, egy nadrág' című film híres betétdala.", "Jávor Pál és sokan mások is énekelték."] },
{ category: "Előadó", puzzle: "TAYLOR SWIFT", hints: ["Napjaink egyik legnépszerűbb és legsikeresebb amerikai énekesnője.", "Hatalmas rajongótábora van, akiket 'Swiftie'-knek neveznek."] },
{ category: "Dalcím", puzzle: "EZ ITT AZ ÉN HAZÁM", hints: ["Máté Péter hazafias dala.", "A zongora dallama és az énekes hangja teszi felejthetetlenné."] },
{ category: "Együttes", puzzle: "AEROSMITH", hints: ["Amerikai rockegyüttes, Steven Tyler a frontembere.", "Az 'Armageddon' című film betétdala, az 'I Don't Want to Miss a Thing' tette őket világszerte ismertté."] },
{ category: "Dalcím", puzzle: "HONFOGLALÁS", hints: ["Demjén Ferenc által énekelt dal, egy azonos című magyar film főcímzenéje.", "A refrénje: 'Kell még egy szó...!'"] },
{ category: "Előadó", puzzle: "FRANK SINATRA", hints: ["Amerikai énekes és színész, a 'The Voice' (A Hang) becenévvel illették.", "'My Way' és a 'New York, New York' a legismertebb dalai."] },
{ category: "Együttes", puzzle: "BONANZA BANZAI", hints: ["A 80-as, 90-es évek magyar szintipop kultuszzenekara.", "Ákos, Hauber Zsolt és Menczel Gábor alkották."] },
{ category: "Dalcím", puzzle: "GANGNAM STYLE", hints: ["PSY dél-koreai előadó 2012-es világslágere.", "A dalhoz tartozó vicces lovagló tánc az egész világot meghódította."] },
{ category: "Előadó", puzzle: "KOMÁR LÁSZLÓ", hints: ["A magyar rock and roll egyik legismertebb alakja.", "'No miss' és a 'Mondd, kis kócos' is a slágerei közé tartozik."] },
{ category: "Együttes", puzzle: "GUNS N' ROSES", hints: ["Amerikai hard rock együttes, Axl Rose és Slash a legismertebb tagjai.", "'Sweet Child o' Mine' és a 'November Rain' a legismertebb dalaik."] },
{ category: "Dalcím", puzzle: "CSAVARD FEL A SZŐNYEGET", hints: ["A Hungária együttes egyik legnagyobb bulihimnusza.", "A refrénje minden házibuliban felcsendül."] },
{ category: "Előadó", puzzle: "ED SHEERAN", hints: ["Brit énekes-dalszerző, aki akusztikus gitárjával hódította meg a világot.", "'Shape of You' és a 'Perfect' a legismertebb dalai."] },

// === TUDOMÁNY ÉS TECHNIKA (CSOMAG 3) ===
{ category: "Tudomány", puzzle: "FOTOSZINTÉZIS", hints: ["A folyamat, amely során a növények a napfény energiáját kémiai energiává alakítják.", "Szén-dioxidból és vízből oxigént és szőlőcukrot állítanak elő."] },
{ category: "Technika", puzzle: "GLOBÁLIS HELYMEGHATÁROZÓ RENDSZER", hints: ["Műholdas navigációs rendszer, rövidítve GPS.", "Segítségével pontosan meg tudjuk határozni a pozíciónkat a Földön."] },
{ category: "Tudós", puzzle: "ALBERT EINSTEIN", hints: ["Német fizikus, a relativitáselmélet megalkotója.", "A leghíresebb egyenlete az E=mc²."] },
{ category: "Csillagászat", puzzle: "FEKETE LYUK", hints: ["Olyan égitest, amelynek gravitációs tere rendkívül erős, még a fény sem tud elszökni belőle.", "A csillagok összeomlásakor keletkezhet."] },
{ category: "Találmány", puzzle: "KÖNYVNYOMTATÁS", hints: ["Johannes Gutenberg nevéhez fűződik a mozgatható betűelemekkel való technológia elterjesztése.", "Forradalmasította az ismeretek terjesztését."] },
{ category: "Tudomány", puzzle: "DEOXYRIBONUKLEINSAV", hints: ["Az örökítőanyag, amely a genetikai információt hordozza, rövidítve DNS.", "Kettős hélix szerkezetű molekula."] },
{ category: "Technika", puzzle: "INTERNET", hints: ["Világméretű, számítógépes hálózatok összekapcsolt rendszere.", "A világháló (WWW) csak egy része ennek."] },
{ category: "Tudós", puzzle: "ISAAC NEWTON", hints: ["Angol fizikus és matematikus, a gravitáció törvényének felfedezője.", "A legenda szerint egy alma fejbe esése ihlette meg."] },
{ category: "Csillagászat", puzzle: "TEJÚTRENDSZER", hints: ["Az a galaxis, amelyben a Naprendszerünk található.", "Körülbelül 200-400 milliárd csillag alkotja."] },
{ category: "Találmány", puzzle: "PENICILLIN", hints: ["Az első antibiotikum, amelyet Alexander Fleming fedezett fel egy penészgombából.", "Forradalmasította az orvostudományt és a bakteriális fertőzések kezelését."] },
{ category: "Tudomány", puzzle: "KONTINENSVÁNDORLÁS", hints: ["Az elmélet, amely szerint a Föld földrészei mozognak egymáshoz képest.", "Alfred Wegener nevéhez fűződik a kidolgozása."] },
{ category: "Technika", puzzle: "HÁROMDIMENZIÓS NYOMTATÁS", hints: ["Digitális modell alapján tárgyak rétegről rétegre történő felépítése.", "Prototípusok és akár emberi szervek készítésére is használják."] },
{ category: "Tudós", puzzle: "STEPHEN HAWKING", hints: ["Brit elméleti fizikus és kozmológus, a fekete lyukak kutatója.", "Súlyos betegsége ellenére is a tudomány egyik legnagyobb alakja lett."] },
{ category: "Csillagászat", puzzle: "NAGY MEDVE CSILLAGKÉP", hints: ["Az északi égbolt egyik legismertebb csillagképe.", "A Göncölszekér a legismertebb része."] },
{ category: "Találmány", puzzle: "TELEFON", hints: ["Alexander Graham Bell nevéhez fűződik a feltalálása.", "Lehetővé tette a hang továbbítását nagy távolságokra."] },

// === SPORT ÉS SPORTOLÓK ===
{ category: "Sportoló", puzzle: "EGERSZEGI KRISZTINA", hints: ["Ötszörös olimpiai bajnok magyar úszónő, a 'kis egér'.", "A hátúszás és a vegyesúszás volt a fő száma."] },
{ category: "Sportesemény", puzzle: "OLIMPIAI JÁTÉKOK", hints: ["Négyévente megrendezett, a világ legnagyobb nemzetközi sporteseménye.", "Az ókori Görögországból ered."] },
{ category: "Sportoló", puzzle: "MICHAEL JORDAN", hints: ["A Chicago Bulls legendás kosárlabdázója, sokak szerint minden idők legjobbja.", "A 23-as mezszám és a 'Levegő Ura' becenév fűződik a nevéhez."] },
{ category: "Csapat", puzzle: "FERRARI", hints: ["Az olasz Formula-1-es csapat, a legrégebbi és legsikeresebb istálló.", "Színük a piros, logójuk egy ágaskodó ló."] },
{ category: "Sportoló", puzzle: "PAPP LÁSZLÓ", hints: ["Háromszoros olimpiai bajnok magyar ökölvívó.", "Papp Laci a beceneve, profiként is veretlen maradt."] },
{ category: "Sportág", puzzle: "VÍZILABDA", hints: ["Magyarország egyik legsikeresebb csapatsportága.", "Két kapura játsszák a medencében, a cél a gólszerzés."] },
{ category: "Sportoló", puzzle: "ROGER FEDERER", hints: ["Svájci teniszlegenda, hússzoros Grand Slam-győztes.", "Elegáns játékstílusáról és sportszerűségéről ismert."] },
{ category: "Sportesemény", puzzle: "TOUR DE FRANCE", hints: ["A világ leghíresebb kerékpáros körversenye.", "A győztes viselheti a sárga trikót."] },
{ category: "Sportoló", puzzle: "HOSSZÚ KATINKA", hints: ["Háromszoros olimpiai bajnok magyar úszónő, az 'Iron Lady'.", "A vegyesúszás specialistája, számos világrekordot tart."] },
{ category: "Csapat", puzzle: "REAL MADRID", hints: ["Spanyol labdarúgóklub, a Bajnokok Ligája legsikeresebb csapata.", "A 'királyi gárda' becenévvel illetik, Puskás Ferenc is itt játszott."] },
{ category: "Sportoló", puzzle: "MUHAMMAD ALI", hints: ["Minden idők egyik legnagyobb ökölvívója, polgárjogi aktivista.", "'Lebegj, mint egy pillangó, szúrj, mint egy méh!'"] },
{ category: "Sportág", puzzle: "JÉGKORONG", hints: ["Gyors, kemény csapatsport, amelyet korcsolyával játszanak a jégen.", "A cél a pakkot az ellenfél kapujába juttatni."] },
{ category: "Sportoló", puzzle: "USAIN BOLT", hints: ["Jamaicai sprinter, a 100 és 200 méteres síkfutás világcsúcstartója.", "A 'villám' becenévvel illették."] },
{ category: "Sportesemény", puzzle: "SUPER BOWL", hints: ["Az amerikai futball (NFL) éves döntője.", "Híres a félidei showműsoráról és a drága reklámokról."] },
{ category: "Sportoló", puzzle: "SZILÁGYI ÁRON", hints: ["Háromszoros olimpiai bajnok magyar kardvívó.", "A sportág történetében egyedülálló módon nyert háromszor egyéniben egymás után."] },
{ category: "Csapat", puzzle: "CHICAGO BULLS", hints: ["A 90-es évek legendás NBA kosárlabdacsapata.", "Michael Jordan, Scottie Pippen és Dennis Rodman is itt játszott."] },
{ category: "Sportág", puzzle: "CSELGÁNCS", hints: ["Japán eredetű küzdősport, a neve azt jelenti: 'a lágy út'.", "A cél az ellenfél dobása és földön tartása."] },
{ category: "Sportoló", puzzle: "LIONEL MESSI", hints: ["Argentin labdarúgó, sokak szerint minden idők legjobbja.", "Számos Aranylabdát nyert, a Barcelona legendája."] },
{ category: "Sportesemény", puzzle: "WIMBLEDONI TENISZBAJNOKSÁG", hints: ["A legrégebbi és legrangosabb teniszverseny a világon.", "A játékosoknak kötelező fehér ruhát viselniük, a füves pálya a jellegzetessége."] },
{ category: "Sportoló", puzzle: "MICHAEL SCHUMACHER", hints: ["Hétszeres Formula-1-es világbajnok német autóversenyző.", "A Ferrari csapatával érte el a legnagyobb sikereit."] },

// === VIDEÓJÁTÉKOK ÉS MESEFIGURÁK ===
{ category: "Videójáték", puzzle: "SUPER MARIO BROS", hints: ["Egy olasz vízvezeték-szerelő kalandjai a Gombakirályságban.", "A cél Peach hercegnő megmentése Bowser karmai közül."] },
{ category: "Mesefigura", puzzle: "MICKEY EGÉR", hints: ["Walt Disney leghíresebb rajzfilmfigurája.", "Nagy, kerek füleiről és piros nadrágjáról ismert."] },
{ category: "Videójáték", puzzle: "MINECRAFT", hints: ["Kockákból építkező, nyílt világú sandbox játék.", "A játékosok bányászhatnak, építhetnek és felfedezhetnek."] },
{ category: "Mesefigura", puzzle: "BUGS BUNNY", hints: ["A Bolondos dallamok répaevő, ravasz nyula.", "Gyakran mondogatja: 'What's up, doc?' (Mi a hézag, hapsikám?)."] },
{ category: "Videójáték", puzzle: "THE LEGEND OF ZELDA", hints: ["A Nintendo fantasy kalandjáték-sorozata.", "A főhős, Link feladata Hyrule megmentése és a hercegnő kiszabadítása."] },
{ category: "Mesefigura", puzzle: "HOMER SIMPSON", hints: ["A Simpson család sör- és fánkkedvelő családfője.", "'D'oh!' a híres felkiáltása."] },
{ category: "Videójáték", puzzle: "GRAND THEFT AUTO", hints: ["Hírhedt, nyílt világú akciójáték-sorozat, ahol a játékos egy bűnözőt irányít.", "A rövidítése GTA."] },
{ category: "Mesefigura", puzzle: "SPONGYABOB KOCKANADRÁG", hints: ["Egy tengeri szivacs, aki egy ananászban lakik a tenger mélyén.", "A Herkulesfürdőben dolgozik szakácsként."] },
{ category: "Videójáték", puzzle: "TETRIS", hints: ["Orosz logikai játék, ahol különböző formájú elemeket kell sorokba rendezni.", "A leeső blokkokat kell forgatni és elhelyezni."] },
{ category: "Mesefigura", puzzle: "HUPILILA TÖRPIKE", hints: ["A Hupikék törpikék egyetlen női tagja.", "Hosszú, szőke haja van, és mindig fehér ruhát visel."] },
{ category: "Videójáték", puzzle: "PAC-MAN", hints: ["Klasszikus arcade játék, ahol egy sárga korongnak kell pontokat ennie egy labirintusban.", "Vigyáznia kell a szellemekkel."] },
{ category: "Mesefigura", puzzle: "GARFIELD", hints: ["Egy lusta, cinikus, narancssárga macska, aki imádja a lasagnát.", "Utálja a hétfőket és a mazsolát."] },
{ category: "Videójáték", puzzle: "THE WITCHER", hints: ["Egy fantasy szerepjáték-sorozat, amely egy szörnyvadász kalandjait követi.", "Ríviai Geralt a főhőse."] },
{ category: "Mesefigura", puzzle: "CSŐRIKE", hints: ["A Bolondos dallamok sárga kanárimadara.", "'Cicát látok!' - kiáltja gyakran."] },
{ category: "Videójáték", puzzle: "DOOM", hints: ["Az első személyű lövöldözős (FPS) játékok egyik úttörője.", "A játékos egy tengerészgyalogost irányít a Mars démoni megszállása alatt."] },

// === VEGYES KATEGÓRIÁK (CSOMAG 3) ===
{ category: "Híres Idézet", puzzle: "A KOCKA EL VAN VETVE", hints: ["Julius Caesar mondta, amikor átlépte a Rubicon folyót.", "A visszavonhatatlan döntés szinonimája."] },
{ category: "Konyhai Eszköz", puzzle: "SODRÓFA", hints: ["Hengeres eszköz a tészta nyújtására.", "Lehet sima vagy recés felületű."] },
{ category: "Márka Szlogen", puzzle: "JUST DO IT", hints: ["A Nike sportszergyártó világhírű jelmondata.", "Jelentése: 'Csak tedd meg!'"] },
{ category: "Fogalom", puzzle: "PLACEBO HATÁS", hints: ["A páciens állapota javul egy hatóanyag nélküli kezeléstől, mert elhiszi, hogy az hatásos.", "A hit gyógyító erejére utal."] },
{ category: "Híres Idézet", puzzle: "LENNI VAGY NEM LENNI AZ ITT A KÉRDÉS", hints: ["Shakespeare Hamlet című drámájának leghíresebb mondata.", "Az élet értelmét és a halált firtatja."] },
{ category: "Konyhai Eszköz", puzzle: "FŐZŐKANÁL", hints: ["Általában fából készült, hosszú nyelű kanál kevergetéshez.", "Nélkülözhetetlen a pörköltek és levesek készítésénél."] },
{ category: "Márka Szlogen", puzzle: "A KAPCSOLAT ÉRTÉK", hints: ["Egy magyar telekommunikációs cég régi, ismert jelmondata.", "A T-Mobile használta."] },
{ category: "Fogalom", puzzle: "FANTOMFÁJDALOM", hints: ["Egy amputált végtag helyén érzett fájdalom.", "Az agy és az idegrendszer komplex működésére utal."] },
{ category: "Híres Idézet", puzzle: "HOUSTON BAJ VAN", hints: ["Az Apollo 13 űrhajósainak híres mondata, amikor robbanás történt a fedélzeten.", "Akkor használják, ha komoly, váratlan probléma merül fel."] },
{ category: "Konyhai Eszköz", puzzle: "SZELETELŐGÉP", hints: ["Gépi eszköz felvágottak, sajtok, kenyér vékony szeletekre vágásához.", "Gyakran megtalálható csemegepultokban."] },
{ category: "Márka Szlogen", puzzle: "AZ ÉLET ÍZE", hints: ["A Coca-Cola egyik híres magyarországi jelmondata volt.", "Az öröm és a frissesség érzését közvetíti."] },
{ category: "Fogalom", puzzle: "STOCKHOLM-SZINDRÓMA", hints: ["A túszok érzelmileg kötődni kezdenek fogvatartóikhoz.", "Egy svédországi bankrablásról kapta a nevét."] },
{ category: "Híres Idézet", puzzle: "ÉN VAGYOK AZ APÁD", hints: ["A Csillagok háborúja egyik legmegdöbbentőbb és legismertebb mondata.", "Darth Vader mondja Luke Skywalkernek."] },
{ category: "Konyhai Eszköz", puzzle: "DUGÓHÚZÓ", hints: ["Eszköz a borosüvegek parafadugójának eltávolítására.", "Több fajtája létezik, például a pincérbicska."] },
{ category: "Márka Szlogen", puzzle: "A LEGKISEBB IS SZÁMÍT", hints: ["A Tesco áruházlánc jelmondata volt.", "Az apró dolgok fontosságára hívja fel a figyelmet."] },
{ category: "Fogalom", puzzle: "PÜRRHOSZI GYŐZELEM", hints: ["Olyan győzelem, amely akkora veszteségekkel jár, hogy szinte vereséggel ér fel.", "Egy ókori görög királyról nevezték el."] },
{ category: "Híres Idézet", puzzle: "ET TU MI FILI BRUTE", hints: ["Julius Caesar állítólagos utolsó szavai, amikor meglátta barátját az orgyilkosai között.", "Jelentése: 'Te is fiam, Brutus?'"] },
{ category: "Konyhai Eszköz", puzzle: "HABVERŐ", hints: ["Eszköz tojásfehérje vagy tejszín kemény habbá verésére.", "Lehet kézi vagy gépi meghajtású."] },
{ category: "Márka Szlogen", puzzle: "A NÉV KÖTELEZ", hints: ["Az Opel autómárka jelmondata volt.", "A megbízhatóságra és a minőségre utal."] },
{ category: "Fogalom", puzzle: "PILLANGÓHATÁS", hints: ["Az elmélet, amely szerint egy apró kezdeti változás beláthatatlanul nagy következményekkel járhat egy komplex rendszerben.", "A káoszelmélet része."] },
{ category: "Foglalkozás", puzzle: "KÉMÉNYSEPRŐ", hints: ["A fűtőberendezések kéményeit tisztítja.", "A hagyomány szerint szerencsét hoz."] },
{ category: "Hétköznapi Tárgy", puzzle: "GEMKAPOCS", hints: ["Kisméretű, hajlított drót papírlapok összefogására.", "Irodai kellék, de hajszálak eltávolítására is használják."] },
{ category: "Foglalkozás", puzzle: "ÜGYVÉD", hints: ["Jogi képviseletet lát el, és tanácsot ad ügyfeleinek.", "Védőként vagy felperesi képviselőként is eljárhat a bíróságon."] },
{ category: "Hétköznapi Tárgy", puzzle: "ÖNGYÚJTÓ", hints: ["Kisméretű eszköz tűz gyújtására.", "Lehet gázzal vagy benzinnel működő."] },
{ category: "Foglalkozás", puzzle: "VIRÁGKÖTŐ", hints: ["Növényekből és virágokból készít csokrokat, koszorúkat és díszeket.", "Kreativitást és szépérzéket igénylő szakma."] },
 ];

               const SPECIAL_PRIZES = [
                { name: 'Videoton Color Star TV', value: 8000 }, { name: 'Csepel Camping bicikli', value: 4500 },
                { name: 'Hajdú Energomat mosógép', value: 7500 }, { name: 'Sokol rádió', value: 1500 },
                { name: 'Lehel hűtőszekrény', value: 6000 }, { name: 'Trapper farmernadrág', value: 1200 },
                { name: 'Éves Balaton szelet adag', value: 3000 }, { name: 'Alfölfi papucs szett', value: 800 },
                { name: 'Skála Kópé ajándékcsomag', value: 2000 }, { name: 'Moncsicsi figura', value: 500 },
                { name: 'Tisza cipő', value: 1800 }, { name: 'Komplett Casco biztosítás', value: 10000 },
                { name: 'Márka üdítő éves adag', value: 4000 }, { name: 'Gazdálkodj Okosan társasjáték', value: 600 },
                { name: 'Rubik kocka gyűjtemény', value: 1500 }, { name: 'Szovjet pezsgő válogatás', value: 2500 },
                { name: 'Videoton Hi-Fi torony', value: 9000 }, { name: 'Fabulon naptej csomag', value: 700 },
                { name: 'Buci Maci csokoládé válogatás', value: 1000 }, { name: 'Képeslap gyűjtemény a Balatonról', value: 400 },
                { name: 'Kombinált szekrénysor', value: 12000 }, { name: 'Bonyhádi zománcos edénykészlet', value: 3500 },
                { name: 'NDK turmixgép', value: 2200 }, { name: 'Diavetítő mesefilmekkel', value: 2800 },
                { name: 'Jugoszláv tengerparti utazás', value: 15000 }, { name: 'Lada 1200 személygépkocsi', value: 40000 },
                { name: 'Éves Népsport előfizetés', value: 900 }, { name: 'Commodore 64 számítógép', value: 20000 },
                { name: 'Orion TV antenna', value: 1300 }, { name: 'Ezer Mester magazin előfizetés', value: 500 }
            ];
            
            const wheelSegmentsR1 = [
                { label: '300', value: 300, color: '#4caf50' }, { label: 'CSŐD', value: 'bankrupt', color: '#212121' },
                { label: '500', value: 500, color: '#f44336' }, { label: 'SÚGÁS', value: 'hint', color: '#9c27b0' },
                { label: 'KIMARADSZ', value: 'lose_turn', color: '#607d8b' }, { label: '400', value: 400, color: '#ff9800' },
                { label: '600', value: 600, color: '#3f51b5' }, { label: 'CSŐD', value: 'bankrupt', color: '#212121' },
                { label: '700', value: 700, color: '#e91e63' }, { label: '350', value: 350, color: '#00bcd4' },
                { label: '550', value: 550, color: '#8bc34a' }, { label: '1000', value: 1000, color: '#ffc107' }
            ];
            const wheelSegmentsR2 = [
                { label: '600', value: 600, color: '#4caf50' }, { label: 'CSŐD', value: 'bankrupt', color: '#212121' },
                { label: '800', value: 800, color: '#f44336' }, { label: 'INGYEN MGH', value: 'free_vowel', color: '#9c27b0' },
                { label: 'KIMARADSZ', value: 'lose_turn', color: '#607d8b' }, { label: 'KÜLÖNDÍJ', value: 'special_prize', color: '#c0c0c0' },
                { label: '700', value: 700, color: '#ff9800' }, { label: '+5000', value: 5000, color: '#3f51b5' },
                { label: 'CSŐD', value: 'bankrupt', color: '#212121' }, { label: '900', value: 900, color: '#e91e63' },
                { label: '1200', value: 1200, color: '#8bc34a' }, { label: '2000', value: 2000, color: '#ffc107' }
            ];
            const wheelSegmentsR3 = [
                { label: '1000', value: 1000, color: '#4caf50' }, { label: 'CSŐD', value: 'bankrupt', color: '#212121' },
                { label: '1500', value: 1500, color: '#f44336' }, { label: 'DUPLA/SEMMI', value: 'double_or_nothing', color: '#9c27b0' },
                { label: 'KIMARADSZ', value: 'lose_turn', color: '#607d8b' }, { label: 'KÜLÖNDÍJ', value: 'special_prize', color: '#c0c0c0' },
                { label: '2000', value: 2000, color: '#ff9800' }, { label: 'EXPRESSZ', value: 'express', color: '#d92027' },
                { label: 'CSŐD', value: 'bankrupt', color: '#212121' }, { label: '1200', value: 1200, color: '#e91e63' },
                { label: '3000', value: 3000, color: '#8bc34a' }, { label: '5000', value: 5000, color: '#cddc39' }
            ];
            const wheelSegmentSets = [wheelSegmentsR1, wheelSegmentsR2, wheelSegmentsR3];
            
            const PUZZLES_PER_HOUR = 10;
            const VOWELS = "AÁEÉIÍOÓÖŐUÚÜŰ";
            // === JAVÍTOTT RÉSZ ===
            const FULL_ALPHABET = "AÁBCDEÉFGHIÍJKLMNOÓÖŐPQRSTUÚÜŰVWXYZ";
            // === JAVÍTÁS VÉGE ===
            const VOWEL_COST = 250;
            const BANK_OFFER_THRESHOLD = 5000;
            const BANK_OFFER_PERCENTAGE = 0.7;
            const HUGE_WIN_THRESHOLD = 4000;
            const MAIN_PRIZE_TIME = 50;
            const MILLIONAIRE_THRESHOLD = 1000000;

            const HOST_MESSAGES = {
                start_game: ["Hölgyeim és Uraim, kezdődjön a játék! Lássuk az első feladványt!", "A stúdió fényei kigyúltak, a kerék készen áll! Sok szerencsét!", "A hajszárítók zúgnak, a tupírok tartanak, a Szerencsekerék pedig forogni készül! Induljon a menet!", "Adásunkat a Videoton TV-n keresztül követhetik! Kezdjünk!", "Csókolom, itt a Szerencsekerék, lehet egy kicsit hangosabban?"],
                start_round: ["Jöhet a(z) <strong>{round}. forduló</strong>! Lássuk a feladványt!", "Új forduló, új remények! Jöhet a következő!", "Új kör, új feladvány! A nyeremények, mint a dollár-forint árfolyam, az egekben!", "Lássuk, mit rejt a betűfal! Talán egy újabb Skála Kópé figurát?"],
                start_golden_round: ["Figyelem, figyelem! Ez egy <strong>⭐ ARANY FELADVÁNY!</strong> A helyes megfejtésért a fordulós nyeremény <strong>DUPLÁN</strong> jár!", "Ez az, amire vártunk! Egy <strong>⭐ ARANY FELADVÁNY!</strong> Itt most nagyot lehet kaszálni, mint egy jó maszek!", "Arany forduló! A nyeremény dupla, mint a Neoton Família koncerten a tömeg!"],
                sunday_greeting: ["Üdvözlöm a Szerencse Vasárnapban! Itt az idő, hogy megforgassa a heti nyereményét! Tegye meg a tétet!", "Vasárnap van, a nagy fogadások napja! A Heti Kassza nyitva, tegye meg a tétet az első körre!", "Vasárnapi különkiadás! A tét nem egy pakli Fecske cigi, hanem a heti nyeremény!"],
                power_up: ["Induljon a pörgetés! Állítsa be az erősséget!", "Na lássuk, mekkorát lendít rajta!", "Lendületet kérek! Pörgessünk, mintha nem lenne holnap!", "Adjon neki kakaót, mint a régi Wartburgnak!"],
                spinning: ["A kerék forog, a kassza csörög!", "Lássuk, hol áll meg a szerencse!", "Forog a kerék, remeg a stúdió! Hol áll meg a csoda?", "Forog a kerék, mint a kazettaszalag, amit bekapott a magnó!", "Lássuk, mit dob a gép, ahogy Taki bácsi mondaná!", "A kerék pörög, mint a Hungária együttes a Sportcsarnokban!"],
                spin_result: ["A pörgetés értéke <strong>{value}&nbsp;Ft</strong>. Most jöhet egy mássalhangzó!", "<strong>{value}&nbsp;Ft</strong> a tét! Melyik betűre gondol?", "A kerék <strong>{value}</strong> Forintot mutat! Mondjon egy mássalhangzót, de ne a 'Dz'-t, mert azt úgyis elrontja!"],
                near_miss_bankrupt: ["Hűha, ez egy hajszálon múlt! Azt hiszem, a stúdióban mindenki visszatartotta a lélegzetét! A pörgetés értéke <strong>{value}&nbsp;Ft</strong>.", "Megúszta! A mutató már majdnem a CSŐD-re csúszott, de végül <strong>{value}&nbsp;Ft</strong> lett belőle!", "Ez most olyan közel volt a csődhöz, mint a szomszédok a panelban! De megvan a <strong>{value}&nbsp;Ft</strong>!"],
                bankrupt: ["Jaj, ne! <strong>CSŐD!</strong> A fordulós kassza most sírva fakad, a Forintok elúsznak!", "Ez a legrosszabb mező! A csőd mindent vitt ebben a körben!", "Jaj, a nagy fekete semmi! A nyeremény ment a levesbe, mint a nokedli!", "CSŐD! Ez most olyan kellemetlen, mint egy bonyhádi zománcos edényben odaégett étel.", "A nyeremény elszállt, mint a Trabant füstje."],
                bankrupt_sunday: ["Ó, a végzet! <strong>CSŐD!</strong> Nemcsak a fordulós nyeremény, de a feltett <strong>{bet}&nbsp;Ft-os tét is elúszott!</strong> Ez a vasárnapi játék kockázata!", "A legrosszabbkor! A <strong>CSŐD</strong> mindent visz, a fordulós nyereményt és a <strong>{bet}&nbsp;Ft-os tétet is!</strong>"],
                lose_turn: ["<strong>KIMARADSZ!</strong> Egy pillanatnyi pihenő, de a következő körben újra próbálkozhat!", "Most sajnos át kell adnia a lehetőséget.", "Hoppá, egy kis pihenő! Most a többiek jönnek, de ne csüggedjen!", "Kimaradsz, mint a B-terv a Macskafogóban!"],
                hint1: ["Látom, elakadt. A rendező súg egy kicsit: <strong>{hint}</strong>. Most újra pörgethet!", "Egy kis segítség a háztól, hogy haladjunk: <strong>{hint}</strong>. Folytassa!"],
                hint2: ["Ez már a végső segítség! A szerkezet a következő: <strong>{hint}</strong>. Innentől már menni fog! Újra pörgethet.", "Technikai elemzés érkezett a stúdióból! A feladvány szerkezete: <strong>{hint}</strong>. Sok sikert!"],
                free_vowel: ["Fantasztikus! Nyert egy <strong>INGYEN MAGÁNHANGZÓT</strong>! Ez többet ér, mint egy jó dollárboltos lelet!", "A kerék kegyes volt, egy ingyen magánhangzó a jutalma!"],
                bonus_points: ["<strong>+{value}&nbsp;FT!</strong> Ez egy szép kis bónusz! Gratulálok!", "Azonnali <strong>{value}&nbsp;Ft</strong>! Ezzel nagyot lépett előre!"],
                express: ["<strong>EXPRESSZ!</strong> Fantasztikus! Minden helyes mássalhangzó 1000 Ft, és addig jöhet, amíg nem hibázik!", "Felszállt az Expresszre! Most nincs megállás, mint a 4-es 6-oson!"],
                double_or_nothing_prompt: ["<strong>DUPLA VAGY SEMMI!</strong> Kockáztatja a körben szerzett <strong>{points}&nbsp;Ft-ot</strong>?"],
                double_win: ["<strong>DUPLA!</strong> Bejött a kockázat, megduplázta a körös Forintjait!", "Bátor döntés volt, és megérte! Aki mer, az nyer!"],
                double_lose: ["<strong>SEMMI!</strong> A szerencse most elpártolt, a körös Forintok elúsztak.", "Aki mer, az néha veszít. Sajnálom, ez most nem jött be."],
                correct_consonant: ["Zseniális! Van <strong>{count}</strong> darab, ez <strong>{earnings}&nbsp;Ft-ot</strong> ér! Ismét ön jön!", "Eltalálta! <strong>{count}</strong> betű, <strong>{earnings}&nbsp;Ft</strong>! Folytassa!"],
                huge_win_consonant: ["Ez igen! Ebből már nemcsak egy lángos, hanem egy egész heti KGST piac kijön! <strong>{count}</strong> darab, összesen <strong>{earnings}&nbsp;Ft</strong>!", "Fantasztikus! Egyetlen betűvel <strong>{earnings}&nbsp;Ft</strong>-ot zsebelt be! Gratulálok!"],
                correct_vowel: ["Igen, van <strong>{count}</strong> darab! A kör folytatódik.", "Jól gondolta, a táblán van <strong>{count}</strong> ilyen betű!", "Megvan! A magánhangzó a helyén, mint Vágási Feri a számítógép előtt!"],
                wrong_letter: ["Sajnálom, de ez a betű nincs a feladványban.", "Ez a betű most a presszóban kávézik, nincs itt.", "Sajnos ez a betű most szabadságon van.", "A betűfal nemet intett. Sebaj, a következő körben javíthat!", "Ez a betű bujkál előlünk, mint a Moncsicsi a szekrény mélyén!", "Ez a tipp most mellément, mint egy rossz vicc.", "Ez a betű most a Balaton partján lángosozik.", "Ez a betű most biztos a Skála Metro-ban vásárol.", "Ez a tipp most annyira volt jó, mint a Fabulon naptej nélkül a déli napon."],
                lucky_tile_cash: ["Várjunk csak! Ez nem egy átlagos betű volt! Ez egy <strong>SZERENCSE CSEMPE!</strong> A betűért járó pénzen felül azonnal kap a stúdiótól <strong>{value}&nbsp;Ft</strong> bónuszt!", "Micsoda szerencse! Egy rejtett bónuszt talált! A jutalma <strong>{value}&nbsp;Ft!</strong>"],
                lucky_tile_vowel: ["Hoppá! Ez egy <strong>SZERENCSE CSEMPE!</strong> A jutalma egy <strong>INGYEN MAGÁNHANGZÓ</strong> kupon! Ezt később felhasználhatja!"],
                solve_success: ["<strong>MEGFEJTÉS!</strong> Gratulálok, ez a helyes megoldás!", "Kiváló! Pontosan ez volt a feladvány!", "Le a kalappal! Ez a helyes megfejtés!", "Megvan! Ön egy agytröszt! A megfejtés helyes, a stúdió tombol!", "Megvan! A stúdióban nagyobb az öröm, mint mikor megjött a nyugati rokon a csokival!", "Ez a megfejtés tisztább, mint a frissen mosott Trapper farmer!", "Megfejtette, mint Rubik a kockát! Gratulálok!"],
                solve_golden_success: ["<strong>ARANY MEGFEJTÉS!</strong> Ez nemcsak helyes, de DUPLA pénzt is ér! A fordulós nyereménye megduplázva! Hatalmas gratuláció!", "Ez az! Megfejtette az Arany Feladványt! A jutalom nem marad el, a kassza duplán csörög!"],
                solve_sunday_success: ["<strong>SIKERES KÖR!</strong> A <strong>{bet}&nbsp;Ft-os tét visszajár</strong>, a fordulós nyeremény pedig hozzáadódik a Heti Kasszához! Szép volt!"],
                solve_fail: ["Hoppá, ez mellément! A tévedés <strong>{penalty}&nbsp;Ft</strong>-ba került a fordulós kasszából, de a játék megy tovább!", "Sajnos ez nem a helyes megfejtés! A rossz tipp ára <strong>{penalty}&nbsp;Ft</strong> volt. Próbálkozzon újra, vagy pörgessen!"],
                game_win: ["<strong>VÉGE AZ ADÁSNAK!</strong> Hatalmas gratuláció! A végső nyereménye <strong>{score}&nbsp;Ft</strong>! Köszönjük a játékot!", "És megvagyunk! Egy fantasztikus játék végén <strong>{score}&nbsp;Ft-tal</strong> lett gazdagabb! Gratulálunk!", "A győztes mindent visz! <strong>{score}&nbsp;Ft</strong>, és örök dicsőség a jutalma! Viszontlátásra!"],
                offer_main_prize: ["Fantasztikus játék volt! Mind a 10 feladványt megfejtette! Most itt a lehetőség a <strong>FŐDÍJ JÁTÉKRA</strong>! Kockáztatja az eddigi nyereményét a duplájáért? <a id='main-prize-link'>Kattintson ide a folytatáshoz!</a>"],
                main_prize_win: ["HIHETETLEN! MEGVAN! MEGVAAAAAN! Ön megnyerte a Fődíjat! A nyereménye megduplázva: <strong>{score}&nbsp;Ft!</strong> Hatalmas gratuláció!", "A stúdió felrobbant! Ez az, megcsinálta! <strong>{score}&nbsp;Ft</strong> a végső nyeremény! Ön egy bajnok!"],
                main_prize_lose: ["Jaj, ne! Sajnos nem ez volt a helyes megfejtés. A Fődíj elúszott, és vele a nyeremény is. De ne csüggedjen, a dicsőség az Öné! Köszönjük a játékot!", "Lejárt az idő! Ó, milyen kár! Egy hajszálon múlt! A Fődíj sajnos nem lett meg. Köszönjük, hogy velünk játszott!"],
                turn_end: ["Újra önnél a lehetőség! Pörgessen, vagy vegyen magánhangzót!", "Lássuk a következő lépést! Pörget vagy vásárol?", "Ismét öné a terep! Mutassa meg, mit tud!"],
                no_consonants: ["A mássalhangzó-készlet kiürült, mint a VIDEOTON képcsőgyár! Most már csak magánhangzót vehet, vagy megfejtheti!", "Nincs több mássalhangzó a tarsolyban! Itt az idő a tutira menni: vegyen egy magánhangzót, vagy mondja a megfejtést!"],
                bank_offer: ["Várjunk csak! A Bank telefonál a vezérlőbe! Látják, hogy remekül halad. Felajánlanak Önnek most azonnal <strong>{offerAmount}&nbsp;Ft-ot</strong>, ha kiszáll a fordulóból. Kockáztat tovább, vagy elfogadja a biztos pénzt?", "Halló, halló! Itt a Bank! Egy ajánlatot tesznek: <strong>{offerAmount}&nbsp;Ft</strong> a zsebbe, és már jöhet is a következő feladvány. Mit lép? Elfogadja?"],
                bank_accepted: ["Bölcs döntés! A <strong>{offerAmount}&nbsp;Ft</strong> már a zsebben, ez már biztos! Jöhet a következő forduló!", "Elfogadta! A nyeremény egy része biztonságban, a többiek pedig irigykedve nézik! Gratulálok!"]
            };

            let gameState;
            let hourlyPuzzleIndices = [];
            let currentModal = { resolve: null, reject: null };
            let isSunday = new Date().getDay() === 0;
            let mainPrizeTimerInterval;

            const wheel = document.getElementById('wheel');
            const spinButton = document.getElementById('spin-button');
            const solveButton = document.getElementById('solve-button');
            const bankOfferButton = document.getElementById('bank-offer-button');
            const newGameButton = document.getElementById('new-game-button');
            const puzzleBoard = document.getElementById('puzzle-board');
            const puzzleCategory = document.getElementById('puzzle-category');
            const scoreDisplay = document.getElementById('score-display');
            const roundWinningsDisplay = document.getElementById('round-winnings-display');
            const roundDisplay = document.getElementById('round-display');
            const hourBlockDisplay = document.getElementById('hour-block-display');
            const roundInfoContainer = document.getElementById('round-info-container');
            const hostMessage = document.getElementById('host-message');
            const alphabetPanel = document.getElementById('alphabet-panel');
            const powerMeterBar = document.getElementById('power-meter-bar');
            const mainHudLabel = document.getElementById('main-hud-label');
            const wonPrizeContainer = document.getElementById('won-prize-container');
            const wonPrizeName = document.getElementById('won-prize-name');
            
            const modalOverlay = document.getElementById('custom-modal');
            const modalTitle = document.getElementById('modal-title');
            const modalText = document.getElementById('modal-text');
            const solveInput = document.getElementById('solve-input');
            const modalConfirmBtn = document.getElementById('modal-confirm-btn');
            const modalCancelBtn = document.getElementById('modal-cancel-btn');

            const mainPrizeModal = document.getElementById('main-prize-modal');
            const mainPrizeCategory = document.getElementById('main-prize-category');
            const mainPrizeBoard = document.getElementById('main-prize-board');
            const mainPrizeGivenLetters = document.getElementById('main-prize-given-letters');
            const mainPrizeTimer = document.getElementById('main-prize-timer');
            const mainPrizeSolveInput = document.getElementById('main-prize-solve-input');
            const mainPrizeConfirmBtn = document.getElementById('main-prize-confirm-btn');
            
            function getWeekNumber(d) {
                d = new Date(Date.UTC(d.getFullYear(), d.getMonth(), d.getDate()));
                d.setUTCDate(d.getUTCDate() + 4 - (d.getUTCDay()||7));
                var yearStart = new Date(Date.UTC(d.getUTCFullYear(),0,1));
                var weekNo = Math.ceil(( ( (d - yearStart) / 86400000) + 1)/7);
                return d.getUTCFullYear() + '-' + weekNo;
            }

            function loadWeeklyScore() {
                const currentWeek = getWeekNumber(new Date());
                const savedWeek = localStorage.getItem('bekebeliWeekId');
                if (currentWeek !== savedWeek) {
                    localStorage.setItem('bekebeliWeeklyScore', '0');
                    localStorage.setItem('bekebeliWeekId', currentWeek);
                }
                return parseInt(localStorage.getItem('bekebeliWeeklyScore') || '0', 10);
            }

            function saveWeeklyScore(score) {
                 localStorage.setItem('bekebeliWeeklyScore', score.toString());
            }

            function seededRandom(seed) {
                let state = seed;
                return function() {
                    state = (state * 9301 + 49297) % 233280;
                    return state / 233280;
                };
            }

            function getHourlyPuzzles(randomGenerator) {
                const regularPuzzles = allPuzzles.filter(p => p.category !== 'Fődíj Feladvány');
                const regularPuzzleIndices = regularPuzzles.map(p => allPuzzles.indexOf(p));
                
                for (let i = regularPuzzleIndices.length - 1; i > 0; i--) {
                    const j = Math.floor(randomGenerator() * (i + 1));
                    [regularPuzzleIndices[i], regularPuzzleIndices[j]] = [regularPuzzleIndices[j], regularPuzzleIndices[i]];
                }
                
                return regularPuzzleIndices.slice(0, Math.min(PUZZLES_PER_HOUR, regularPuzzles.length));
            }
            
            function playSound(id, loop = false) {
                const sound = document.getElementById(id);
                if (sound) {
                    sound.currentTime = 0;
                    sound.loop = loop;
                    sound.play().catch(e => console.log("Hiba a hanglejátszáskor:", e));
                }
            }
             function stopSound(id) {
                const sound = document.getElementById(id);
                if (sound) {
                    sound.pause();
                    sound.currentTime = 0;
                }
            }
            
            function getRandomMessage(category, replacements = {}) {
                const messages = HOST_MESSAGES[category];
                let message = messages[Math.floor(Math.random() * messages.length)];
                for (const key in replacements) {
                    message = message.replace(new RegExp(`{${key}}`, 'g'), replacements[key]);
                }
                return message;
            }

            function resetGameState(isNewGame = false) {
                const oldState = gameState;
                gameState = {
                    playerScore: isNewGame ? loadWeeklyScore() : (oldState ? oldState.playerScore : 0),
                    roundWinnings: 0,
                    currentRound: isNewGame ? 1 : (oldState ? oldState.currentRound + 1 : 1),
                    totalRounds: isNewGame ? 0 : (oldState ? oldState.totalRounds : 0),
                    puzzleHourId: isNewGame ? null : (oldState ? oldState.puzzleHourId : null),
                    goldenPuzzleRounds: isNewGame ? [] : (oldState ? oldState.goldenPuzzleRounds : []),
                    luckyTiles: [],
                    currentBet: 0,
                    currentSpinValue: null,
                    isSpinning: false,
                    isPoweringUp: false,
                    awaitingConsonant: false,
                    isExpressTurn: false,
                    noMoreConsonants: false,
                    freeVowels: isNewGame ? 0 : (oldState ? oldState.freeVowels : 0),
                    guessedLetters: [],
                    hintUsed: false,
                    specialPrizeWon: isNewGame ? false : (oldState ? oldState.specialPrizeWon : false),
                    wonPrizes: isNewGame ? [] : (oldState ? oldState.wonPrizes : []),
                    isMillionaire: false
                };
            }

            function setupPuzzleBoard(boardElement, puzzleData) {
                boardElement.innerHTML = '';
                const words = puzzleData.puzzle.toUpperCase().split(' ');
                const rows = [];
                let currentRow = [];
                let currentLength = 0;
                const maxRowLength = window.innerWidth < 480 ? 10 : 14;
                
                words.forEach(word => {
                    if (currentLength + word.length > maxRowLength && currentRow.length > 0) {
                        rows.push(currentRow);
                        currentRow = [];
                        currentLength = 0;
                    }
                    currentRow.push(word);
                    currentLength += word.length + 1;
                });
                rows.push(currentRow);

                rows.forEach(wordArray => {
                    const rowDiv = document.createElement('div');
                    rowDiv.className = 'puzzle-row';
                    wordArray.forEach((word, wordIndex) => {
                        word.split('').forEach(char => {
                            const tile = document.createElement('div');
                            if (char === ' ') {
                                tile.className = 'puzzle-tile space';
                            } else {
                                tile.className = 'puzzle-tile';
                                tile.innerHTML = `<div class="tile-inner"><div class="tile-face tile-front"></div><div class="tile-face tile-back">${char}</div></div>`;
                                tile.dataset.letter = char;
                            }
                            rowDiv.appendChild(tile);
                        });
                        
                        if(wordIndex < wordArray.length - 1) {
                             const spaceTile = document.createElement('div');
                             spaceTile.className = 'puzzle-tile space';
                             rowDiv.appendChild(spaceTile);
                        }
                    });
                    boardElement.appendChild(rowDiv);
                });
            }

            function createAlphabetPanel() {
                alphabetPanel.innerHTML = '';
                FULL_ALPHABET.split('').forEach(letter => {
                    const key = document.createElement('button');
                    key.className = 'alphabet-key';
                    key.textContent = letter;
                    key.dataset.letter = letter;
                    if (VOWELS.includes(letter)) key.classList.add('vowel');
                    key.addEventListener('click', () => handleLetterGuess(letter));
                    alphabetPanel.appendChild(key);
                });
            }
            
            function updateAlphabetPanel() {
                document.querySelectorAll('.alphabet-key').forEach(key => {
                    const letter = key.dataset.letter;
                    const isVowel = VOWELS.includes(letter);
                    
                    key.disabled = gameState.guessedLetters.includes(letter) || gameState.isSpinning;

                    if (!isVowel) {
                        key.disabled = key.disabled || (!gameState.awaitingConsonant && !gameState.isExpressTurn);
                    } else {
                        key.disabled = key.disabled || gameState.awaitingConsonant || (gameState.playerScore + gameState.roundWinnings < VOWEL_COST && gameState.freeVowels === 0);
                    }
                });
            }

            function polarToCartesian(cx, cy, r, angle) {
                const rad = (angle - 90) * Math.PI / 180.0;
                return { x: cx + (r * Math.cos(rad)), y: cy + (r * Math.sin(rad)) };
            }
            
            function drawWheel(round) {
                const wheelSetIndex = Math.min(round - 1, wheelSegmentSets.length - 1);
                wheel.innerHTML = '';
                const segments = JSON.parse(JSON.stringify(wheelSegmentSets[wheelSetIndex])); // Deep copy
                
                if (gameState.specialPrizeWon && round > 1) {
                    const prizeIndex = segments.findIndex(s => s.value === 'special_prize');
                    if (prizeIndex !== -1) {
                        segments[prizeIndex] = { label: '1000', value: 1000, color: '#4caf50' };
                    }
                }

                const numSegments = segments.length;
                const angleStep = 360 / numSegments;
                const radius = 50;
                const center = 50;
                
                const bgCircle = document.createElementNS("http://www.w3.org/2000/svg", "circle");
                bgCircle.setAttribute("cx", center);
                bgCircle.setAttribute("cy", center);
                bgCircle.setAttribute("r", radius);
                bgCircle.setAttribute("fill", "#333");
                wheel.appendChild(bgCircle);

                for (let i = 0; i < numSegments; i++) {
                    const segment = segments[i];
                    const startAngle = i * angleStep;
                    const endAngle = (i + 1) * angleStep;
                    const start = polarToCartesian(center, center, radius, endAngle);
                    const end = polarToCartesian(center, center, radius, startAngle);
                    const largeArcFlag = endAngle - startAngle <= 180 ? "0" : "1";
                    
                    const d = `M ${start.x} ${start.y} A ${radius} ${radius} 0 ${largeArcFlag} 0 ${end.x} ${end.y} L ${center} ${center} Z`;
                    
                    const path = document.createElementNS("http://www.w3.org/2000/svg", "path");
                    path.setAttribute("d", d);
                    path.setAttribute("fill", segment.color);
                    path.setAttribute("stroke", "rgba(0,0,0,0.4)");
                    path.setAttribute("stroke-width", "0.5");
                    wheel.appendChild(path);

                    const textAngle = startAngle + angleStep / 2;
                    const textPos = polarToCartesian(center, center, radius * 0.7, textAngle);
                    const text = document.createElementNS("http://www.w3.org/2000/svg", "text");
                    text.setAttribute("x", textPos.x);
                    text.setAttribute("y", textPos.y);
                    text.setAttribute("text-anchor", "middle");
                    text.setAttribute("dominant-baseline", "middle");
                    text.setAttribute("font-weight", "bold");
                    text.setAttribute("font-size", segment.value === 'special_prize' ? "4.5px" : "4.8px");
                    text.setAttribute("fill", (typeof segment.value === 'number' && segment.value < 5000) || segment.value === 'special_prize' ? '#111' : 'white');
                    text.setAttribute("transform", `rotate(${textAngle + 90} ${textPos.x} ${textPos.y})`);
                    
                    const words = segment.label.split(' ');
                    if (words.length > 1) {
                         words.forEach((word, index) => {
                            const tspan = document.createElementNS("http://www.w3.org/2000/svg", "tspan");
                            tspan.setAttribute("x", textPos.x);
                            tspan.setAttribute("dy", `${index === 0 ? -0.5 * (words.length - 1) * 4.8 : 4.8}`);
                            tspan.textContent = word;
                            text.appendChild(tspan);
                        });
                    } else {
                        text.textContent = segment.label;
                    }
                    wheel.appendChild(text);

                    const pegPos = polarToCartesian(center, center, radius -1, startAngle);
                    const peg = document.createElementNS("http://www.w3.org/2000/svg", "circle");
                    peg.setAttribute("cx", pegPos.x);
                    peg.setAttribute("cy", pegPos.y);
                    peg.setAttribute("r", 1.2);
                    peg.setAttribute("fill", "silver");
                    peg.setAttribute("stroke", "black");
                    peg.setAttribute("stroke-width", "0.3");
                    wheel.appendChild(peg);
                }

                const hub = document.createElementNS("http://www.w3.org/2000/svg", "circle");
                hub.setAttribute("cx", center);
                hub.setAttribute("cy", center);
                hub.setAttribute("r", "8");
                hub.setAttribute("fill", "#666");
                hub.setAttribute("stroke", "#333");
                hub.setAttribute("stroke-width", "1");
                wheel.appendChild(hub);
                const hubShine = document.createElementNS("http://www.w3.org/2000/svg", "circle");
                hubShine.setAttribute("cx", center);
                hubShine.setAttribute("cy", center);
                hubShine.setAttribute("r", "6");
                hubShine.setAttribute("fill", "#aaa");
                wheel.appendChild(hubShine);
            }
            
            function updateUI() {
                scoreDisplay.textContent = `${gameState.playerScore.toLocaleString('hu-HU')} Ft`;
                
                let roundWinningsText;
                 if(isSunday && gameState.currentBet > 0){
                    roundWinningsText = `${gameState.roundWinnings.toLocaleString('hu-HU')} / -${gameState.currentBet.toLocaleString('hu-HU')} Ft`;
                } else {
                    roundWinningsText = `${gameState.roundWinnings.toLocaleString('hu-HU')} Ft`;
                }

                roundWinningsDisplay.textContent = roundWinningsText;
                const mobileWinningsDisplay = document.getElementById('round-winnings-display-mobile');
                if (mobileWinningsDisplay) {
                    mobileWinningsDisplay.textContent = roundWinningsText;
                }

                if(gameState.totalRounds > 0){
                    roundInfoContainer.style.display = 'flex';
                    roundDisplay.textContent = `Forduló: ${gameState.currentRound}/${gameState.totalRounds}`;
                    const date = new Date(gameState.puzzleHourId * 60 * 60 * 1000);
                    hourBlockDisplay.textContent = `Adás: ${date.getHours()}:00 órai blokk`;
                } else {
                    roundInfoContainer.style.display = 'none';
                }

                if (gameState.wonPrizes.length > 0) {
                    wonPrizeName.textContent = gameState.wonPrizes.join(', ');
                    wonPrizeContainer.style.display = 'flex';
                } else {
                    wonPrizeContainer.style.display = 'none';
                }

                solveButton.disabled = gameState.isSpinning || gameState.awaitingConsonant;
                spinButton.disabled = (gameState.isSpinning || gameState.awaitingConsonant || gameState.isExpressTurn || gameState.noMoreConsonants) && !gameState.isPoweringUp;
                updateAlphabetPanel();
                checkAndMakeBankOffer();
                saveWeeklyScore(gameState.playerScore);
            }

            function updateHostMessage(message, isImportant = false) {
                hostMessage.innerHTML = message;
                hostMessage.style.borderColor = isImportant ? 'var(--gold-color)' : 'rgba(244, 233, 216, 0.5)';
            }

            function showModal({title, text, showInput = false, inputType='text', confirmText = 'Rendben', cancelText = 'Mégse', showCancel = true}) {
                return new Promise((resolve, reject) => {
                    const modalButtonsContainer = document.querySelector('.modal-buttons');
                    modalButtonsContainer.innerHTML = ''; // Clear previous buttons

                    const confirmBtn = document.createElement('button');
                    confirmBtn.id = 'modal-confirm-btn';
                    confirmBtn.className = 'modal-btn';
                    confirmBtn.textContent = confirmText;
                    confirmBtn.onclick = () => {
                        const value = solveInput.style.display === 'block' ? solveInput.value : true;
                        closeModal(value);
                    };
                    modalButtonsContainer.appendChild(confirmBtn);

                    if (showCancel) {
                        const cancelBtn = document.createElement('button');
                        cancelBtn.id = 'modal-cancel-btn';
                        cancelBtn.className = 'modal-btn';
                        cancelBtn.textContent = cancelText;
                        cancelBtn.onclick = () => closeModal(false);
                        modalButtonsContainer.appendChild(cancelBtn);
                    }

                    modalTitle.textContent = title;
                    modalText.innerHTML = text;
                    solveInput.type = inputType;
                    solveInput.style.display = showInput ? 'block' : 'none';
                    if (showInput) solveInput.focus();
                    solveInput.value = '';
                    
                    modalOverlay.classList.add('visible');
                    currentModal.resolve = resolve;
                    currentModal.reject = reject;
                });
            }

            function closeModal(value) {
                modalOverlay.classList.remove('visible');
                if (value !== null && currentModal.resolve) {
                    currentModal.resolve(value);
                } else if (currentModal.reject) {
                    currentModal.reject();
                }
                currentModal = { resolve: null, reject: null };
            }
            
            function togglePowerMeter() {
                if (gameState.isSpinning || gameState.awaitingConsonant) return;
                if (!gameState.isPoweringUp) {
                    gameState.isPoweringUp = true;
                    powerMeterBar.classList.add('power-up');
                    updateHostMessage(getRandomMessage('power_up'));
                    spinButton.textContent = "MEGÁLLÍT";
                } else {
                    gameState.isPoweringUp = false;
                    powerMeterBar.classList.remove('power-up');
                    const power = powerMeterBar.offsetWidth / powerMeterBar.parentElement.offsetWidth;
                    powerMeterBar.style.width = `${power * 100}%`;
                    spinButton.textContent = "PÖRGETÉS";
                    spinWheel(power);
                }
            }

            function spinWheel(power) {
                if (gameState.isSpinning) return;
                gameState.isSpinning = true;
                gameState.currentSpinValue = null;
                updateUI();
                updateHostMessage(getRandomMessage('spinning'));
                playSound('spin-sound');
                const baseRotations = 3;
                const powerRotation = power * 4;
                const randomExtraRotation = Math.random();
                const totalRotation = (baseRotations + powerRotation + randomExtraRotation) * 360;
                const currentRotation = parseFloat(wheel.dataset.rotation || 0);
                const newRotation = currentRotation + totalRotation;
                wheel.style.transform = `rotate(${newRotation}deg)`;
                wheel.dataset.rotation = newRotation;
                setTimeout(() => {
                    gameState.isSpinning = false;
                    const wheelSetIndex = Math.min(gameState.currentRound - 1, wheelSegmentSets.length - 1);
                    const segments = JSON.parse(JSON.stringify(wheelSegmentSets[wheelSetIndex])); // Deep copy
                    if (gameState.specialPrizeWon && gameState.currentRound > 1) {
                        const prizeIndex = segments.findIndex(s => s.value === 'special_prize');
                        if (prizeIndex !== -1) {
                            segments[prizeIndex] = { label: '1000', value: 1000, color: '#4caf50' };
                        }
                    }

                    const numSegments = segments.length;
                    const segmentAngle = 360 / numSegments;
                    
                    const finalAngle = newRotation % 360;
                    const pointerAngle = (360 - finalAngle) % 360; 
                    const segmentIndex = Math.floor(pointerAngle / segmentAngle);
                    
                    const result = segments[segmentIndex];
                    
                    const prevSegment = segments[(segmentIndex - 1 + numSegments) % numSegments];
                    const nextSegment = segments[(segmentIndex + 1) % numSegments];

                    if (result.value !== 'bankrupt' && (prevSegment.value === 'bankrupt' || nextSegment.value === 'bankrupt')) {
                        handleSpinResult(result, true); 
                    } else {
                        handleSpinResult(result, false);
                    }
                    powerMeterBar.style.width = '0%';
                }, 5000);
            }
            
             function checkAllConsonantsGuessed() {
                const currentPuzzle = allPuzzles.filter(p => p.category !== 'Fődíj Feladvány')[hourlyPuzzleIndices[gameState.currentRound - 1]].puzzle.toUpperCase();
                const uniqueChars = [...new Set(currentPuzzle.split(''))];
                const consonantsInPuzzle = uniqueChars.filter(char => !VOWELS.includes(char) && char !== ' ');

                const allGuessed = consonantsInPuzzle.every(consonant => gameState.guessedLetters.includes(consonant));

                if (allGuessed && !gameState.noMoreConsonants) {
                    gameState.noMoreConsonants = true;
                    updateHostMessage(getRandomMessage('no_consonants'), true);
                    updateUI();
                }
             }


            function handleSpinResult(result, isNearMiss) {
                gameState.awaitingConsonant = false;
                const currentPuzzleData = allPuzzles.filter(p => p.category !== 'Fődíj Feladvány')[hourlyPuzzleIndices[gameState.currentRound - 1]];
                
                switch(result.value) {
                    case 'bankrupt':
                        playSound('bankrupt-sound');
                        if(isSunday){
                             updateHostMessage(getRandomMessage('bankrupt_sunday', {bet: gameState.currentBet.toLocaleString('hu-HU')}), true);
                             gameState.playerScore -= gameState.currentBet;
                             gameState.playerScore = Math.max(0, gameState.playerScore);
                        } else {
                             updateHostMessage(getRandomMessage('bankrupt'), true);
                        }
                        gameState.roundWinnings = 0;
                        endTurn();
                        break;
                    case 'lose_turn':
                        updateHostMessage(getRandomMessage('lose_turn'), true);
                        endTurn();
                        break;
                    case 'hint':
                         if (!gameState.hintUsed && currentPuzzleData.hints && currentPuzzleData.hints[0]) {
                            updateHostMessage(getRandomMessage('hint1', { hint: currentPuzzleData.hints[0] }), true);
                            gameState.hintUsed = true;
                        } else if (currentPuzzleData.hints && currentPuzzleData.hints[1]) {
                             updateHostMessage(getRandomMessage('hint2', { hint: currentPuzzleData.hints[1] }), true);
                        }
                        updateUI(); 
                        break;
                    case 'free_vowel':
                        updateHostMessage(getRandomMessage('free_vowel'), true);
                        gameState.freeVowels++;
                        updateUI();
                        break;
                    case 5000: // bónusz
                        updateHostMessage(getRandomMessage('bonus_points', {value: result.value.toLocaleString('hu-HU')}), true);
                        gameState.roundWinnings += result.value;
                        updateUI();
                        break;
                    case 'express':
                        gameState.isExpressTurn = true;
                        gameState.currentSpinValue = 1000;
                        updateHostMessage(getRandomMessage('express'), true);
                        updateUI();
                        break;
                    case 'double_or_nothing':
                        handleDoubleOrNothing();
                        break;
                    case 'special_prize':
                        handleSpecialPrize();
                        break;
                    default: // Számérték
                        gameState.currentSpinValue = result.value;
                        gameState.awaitingConsonant = true;
                        if (isNearMiss) {
                            updateHostMessage(getRandomMessage('near_miss_bankrupt', {value: result.value.toLocaleString('hu-HU')}), true);
                        } else {
                            updateHostMessage(getRandomMessage('spin_result', {value: result.value.toLocaleString('hu-HU')}), true);
                        }
                        updateUI();
                        break;
                }
            }

            async function handleSpecialPrize() {
                playSound('prize-sound');
                gameState.specialPrizeWon = true; 
                drawWheel(gameState.currentRound); 
                
                const prize = SPECIAL_PRIZES[Math.floor(Math.random() * SPECIAL_PRIZES.length)];
                const cashValue = Math.floor(prize.value / 2);

                try {
                    const choice = await showModal({
                        title: 'Különdíj!',
                        text: `Gratulálok, megnyerte a Különdíjat: egy <strong>${prize.name}</strong>!<br><br>Választhat: elviszi a nyereményt, vagy kéri az értékének felét, <strong>${cashValue.toLocaleString('hu-HU')}&nbsp;Ft</strong>-ot?`,
                        confirmText: 'A Nyereményt Kérem!',
                        cancelText: `Kérem a Pénzt (${cashValue.toLocaleString('hu-HU')} Ft)`,
                        showCancel: true
                    });

                    if (choice) {
                        gameState.wonPrizes.push(prize.name);
                        updateHostMessage(`Remek választás! A(z) <strong>${prize.name}</strong> már az Öné! A játék folytatódik!`, true);
                    } else {
                         gameState.roundWinnings += cashValue;
                         updateHostMessage(`Praktikus döntés! <strong>${cashValue.toLocaleString('hu-HU')}&nbsp;Ft</strong> jóváírva! Folytassuk!`, true);
                    }
                } catch { 
                     gameState.roundWinnings += cashValue;
                     updateHostMessage(`A biztos pénzt választotta, <strong>${cashValue.toLocaleString('hu-HU')}&nbsp;Ft</strong> jóváírva! Folytassuk!`, true);
                }
                endTurn();
            }

            async function handleDoubleOrNothing() {
                if (gameState.roundWinnings <= 0) {
                    updateHostMessage("<strong>DUPLA VAGY SEMMI</strong>, de nincs mit kockáztatni ebben a körben. Folytathatod.", true);
                    endTurn();
                    return;
                }
                
                try {
                    const choice = await showModal({
                        title: "Dupla vagy Semmi",
                        text: getRandomMessage('double_or_nothing_prompt', {points: gameState.roundWinnings.toLocaleString('hu-HU')}),
                        confirmText: "Kockáztatok!",
                        cancelText: "Nem merem",
                        showCancel: true
                    });
                    
                    if (choice) {
                        if (Math.random() < 0.5) {
                            gameState.roundWinnings *= 2;
                            updateHostMessage(getRandomMessage('double_win'), true);
                        } else {
                            gameState.roundWinnings = 0;
                            updateHostMessage(getRandomMessage('double_lose'), true);
                        }
                    }
                } catch (e) { /* User cancelled */ }
                endTurn();
            }
            
            function handleLetterGuess(letter) {
                if (gameState.guessedLetters.includes(letter) || document.querySelector(`.alphabet-key[data-letter="${letter}"]`).disabled) return;
                
                const isVowel = VOWELS.includes(letter);
                if (!isVowel && !gameState.awaitingConsonant && !gameState.isExpressTurn) return;
                if (isVowel && gameState.awaitingConsonant) return;

                bankOfferButton.style.display = 'none';
                
                if (isVowel) {
                    if(gameState.freeVowels > 0) {
                        gameState.freeVowels--;
                    } else {
                        gameState.roundWinnings -= VOWEL_COST;
                    }
                }
                
                gameState.guessedLetters.push(letter);
                
                const currentPuzzle = allPuzzles.filter(p => p.category !== 'Fődíj Feladvány')[hourlyPuzzleIndices[gameState.currentRound - 1]].puzzle.toUpperCase();
                const foundCount = (currentPuzzle.match(new RegExp(letter, "g")) || []).length;

                if (foundCount > 0) {
                    const luckyTile = gameState.luckyTiles.find(tile => tile.letter === letter);
                    if (luckyTile) {
                        playSound('lucky-sound');
                        
                        document.querySelectorAll(`.puzzle-tile[data-letter="${letter}"] .tile-back`).forEach(face => {
                             face.classList.add('golden-letter-glow');
                        });

                        if (luckyTile.bonusType === 'cash') {
                            gameState.roundWinnings += luckyTile.value;
                            updateHostMessage(getRandomMessage('lucky_tile_cash', { value: luckyTile.value.toLocaleString('hu-HU') }), true);
                        } else if (luckyTile.bonusType === 'vowel') {
                            gameState.freeVowels += luckyTile.value;
                            updateHostMessage(getRandomMessage('lucky_tile_vowel'), true);
                        }
                        
                        gameState.luckyTiles = gameState.luckyTiles.filter(tile => tile.letter !== letter);
                         setTimeout(() => {
                            playSound('correct-sound');
                            revealAndCalculate(letter, isVowel, foundCount);
                         }, 1500);

                    } else {
                        playSound('correct-sound');
                        revealAndCalculate(letter, isVowel, foundCount);
                    }
                } else {
                    updateHostMessage(getRandomMessage('wrong_letter'));
                    endTurn();
                }
            }
            
            function revealAndCalculate(letter, isVowel, foundCount){
                 document.querySelectorAll(`.puzzle-tile[data-letter="${letter}"]`).forEach(tile => tile.classList.add('revealed'));
                    if (isVowel) {
                        updateHostMessage(getRandomMessage('correct_vowel', {count: foundCount}));
                    } else {
                        const earnings = foundCount * gameState.currentSpinValue;
                        gameState.roundWinnings += earnings;
                        
                        if (earnings >= HUGE_WIN_THRESHOLD) {
                             updateHostMessage(getRandomMessage('huge_win_consonant', {count: foundCount, earnings: earnings.toLocaleString('hu-HU')}));
                        } else {
                             updateHostMessage(getRandomMessage('correct_consonant', {count: foundCount, earnings: earnings.toLocaleString('hu-HU')}));
                        }

                        if (!gameState.isExpressTurn) gameState.awaitingConsonant = false;
                    }

                if (document.querySelectorAll('.puzzle-tile[data-letter]').length === document.querySelectorAll('.puzzle-tile.revealed').length) {
                    setTimeout(() => solvePuzzle(true), 1000);
                } else {
                    updateUI();
                    checkAllConsonantsGuessed();
                }
            }
            
            async function solvePuzzle(autoSolve = false) {
                const puzzleData = allPuzzles.filter(p => p.category !== 'Fődíj Feladvány')[hourlyPuzzleIndices[gameState.currentRound - 1]];
                let attempt = '';

                if (!autoSolve) {
                    try {
                        attempt = await showModal({
                            title: 'Megfejtés', text: 'Kérem a teljes megfejtést:', showInput: true, inputType: 'text'
                        });
                        if (!attempt) return;
                    } catch { return; }
                } else {
                    attempt = puzzleData.puzzle;
                }

                if (attempt.toUpperCase().trim().replace(/\s+/g, ' ') === puzzleData.puzzle.toUpperCase()) {
                    
                    document.querySelectorAll('.puzzle-tile[data-letter]:not(.revealed)').forEach(tile => {
                        setTimeout(() => tile.classList.add('revealed'), Math.random() * 500);
                    });
                    playSound('win-sound');

                    if(isSunday) {
                        gameState.playerScore += gameState.roundWinnings + gameState.currentBet; 
                        updateHostMessage(getRandomMessage('solve_sunday_success', {bet: gameState.currentBet.toLocaleString('hu-HU')}), true);
                    } else if(gameState.goldenPuzzleRounds.includes(gameState.currentRound)) {
                        gameState.playerScore += gameState.roundWinnings * 2;
                        updateHostMessage(getRandomMessage('solve_golden_success'), true);
                    } else {
                        gameState.playerScore += gameState.roundWinnings;
                        updateHostMessage(getRandomMessage('solve_success'));
                    }

                    if (gameState.currentRound < gameState.totalRounds) {
                        setTimeout(() => startRound(false), 4000); 
                    } else {
                        setTimeout(offerMainPrizeGame, 4000);
                    }
                } else {
                    const penalty = Math.max(500, Math.floor(gameState.roundWinnings * 0.20));
                    gameState.roundWinnings = Math.max(0, gameState.roundWinnings - penalty);
                    
                    updateHostMessage(getRandomMessage('solve_fail', {penalty: penalty.toLocaleString('hu-HU')}), true);
                    updateUI();
                }
            }
            
            function checkAndMakeBankOffer() {
                 if (isSunday) return; 
                 const allTiles = document.querySelectorAll('.puzzle-tile[data-letter]').length;
                 const revealedTiles = document.querySelectorAll('.puzzle-tile.revealed').length;
                 const unrevealedPercent = allTiles > 0 ? (allTiles - revealedTiles) / allTiles : 0;

                 if (gameState.roundWinnings >= BANK_OFFER_THRESHOLD && unrevealedPercent >= 0.4 && !gameState.awaitingConsonant && !gameState.isSpinning) {
                     const offerAmount = Math.floor(gameState.roundWinnings * BANK_OFFER_PERCENTAGE);
                     updateHostMessage(getRandomMessage('bank_offer', {offerAmount: offerAmount.toLocaleString('hu-HU')}), true);
                     bankOfferButton.textContent = `Elfogadom (${offerAmount.toLocaleString('hu-HU')} Ft)`;
                     bankOfferButton.style.display = 'flex';
                 } else {
                     bankOfferButton.style.display = 'none';
                 }
            }
            
            function handleBankOffer() {
                const offerAmount = Math.floor(gameState.roundWinnings * BANK_OFFER_PERCENTAGE);
                gameState.playerScore += offerAmount;
                updateHostMessage(getRandomMessage('bank_accepted', {offerAmount: offerAmount.toLocaleString('hu-HU')}), true);
                
                setTimeout(() => {
                    startRound(false);
                }, 3000);
            }


            function gameWin(isMainPrizeResult = false) {
                if (isSunday && gameState.playerScore >= MILLIONAIRE_THRESHOLD) {
                    const currentWeekId = getWeekNumber(new Date());
                    const [year, week] = currentWeekId.split('-').map(Number);
                    let nextWeek = week + 1;
                    let nextYear = year;
                    if (nextWeek > 52) {
                        nextWeek = 1;
                        nextYear++;
                    }
                    const nextWeekId = `${nextYear}-${nextWeek}`;
                    localStorage.setItem('millionaireUntilWeekId', nextWeekId);
                    updateHostMessage(`Gratulálok, <strong>${gameState.playerScore.toLocaleString('hu-HU')}&nbsp;Ft</strong>-tal Ön lett a <strong>Hét Milliomosa!</strong>`, true);
                } else if (!isMainPrizeResult) {
                    updateHostMessage(getRandomMessage('game_win', {score: gameState.playerScore.toLocaleString('hu-HU')}), true);
                }
                 
                 setTimeout(() => {
                    localStorage.setItem('lastPlayedHourId', gameState.puzzleHourId.toString());
                    if (!isMainPrizeResult) {
                         updateHostMessage("Az erre az órára szánt játék véget ért. Köszönöm a figyelmet! Jöjjön vissza később egy új adásért!", true);
                    }
                 }, 4000);
                 spinButton.disabled = true;
                 solveButton.disabled = true;
                 bankOfferButton.style.display = 'none';
                 document.querySelectorAll('.alphabet-key').forEach(k => k.disabled = true);
            }

            function endTurn() {
                gameState.currentSpinValue = null;
                gameState.awaitingConsonant = false;
                gameState.isExpressTurn = false;
                setTimeout(() => {
                    if (document.querySelectorAll('.puzzle-tile[data-letter]').length !== document.querySelectorAll('.puzzle-tile.revealed').length && gameState.currentRound <= gameState.totalRounds) {
                         if (!gameState.noMoreConsonants) {
                           updateHostMessage(getRandomMessage('turn_end'));
                        } else {
                           updateHostMessage(getRandomMessage('no_consonants'), true);
                        }
                    }
                    updateUI();
                }, 3000); 
            }
            
            async function promptForBet() {
                let bet = null;
                while (bet === null) {
                    try {
                        const rawBet = await showModal({
                            title: 'Szerencse Vasárnap Tét',
                            text: `A Heti Kassza: <strong>${gameState.playerScore.toLocaleString('hu-HU')}&nbsp;Ft</strong>. Mennyi a tét erre a körre?`,
                            showInput: true,
                            inputType: 'number',
                            confirmText: 'Tétet megteszem!',
                            showCancel: false
                        });
                        
                        const betAmount = parseInt(rawBet, 10);
                        if (isNaN(betAmount) || betAmount <= 0) {
                            alert("Kérem, érvényes, nullánál nagyobb számot adjon meg!");
                        } else if (betAmount > gameState.playerScore) {
                            alert("Nincs elég pénz a kasszában ekkora téthez!");
                        } else {
                            bet = betAmount;
                        }
                    } catch {
                         alert("A tét megadása kötelező a folytatáshoz!");
                    }
                }
                return bet;
            }

            async function startRound(isNewGame) {
                if (isNewGame) {
                    const hourId = Math.floor(Date.now() / (1000 * 60 * 60));
                    const random = seededRandom(hourId);
                    
                    const lastPlayedHour = localStorage.getItem('lastPlayedHourId');
                    if (lastPlayedHour && parseInt(lastPlayedHour, 10) === hourId) {
                        const lastScore = loadWeeklyScore();
                        updateHostMessage("Az erre az órára szánt játék véget ért. Köszönöm a figyelmet! Jöjjön vissza később egy új adásért!", true);
                        scoreDisplay.textContent = `${lastScore.toLocaleString('hu-HU')} Ft`;
                        
                        roundInfoContainer.style.display = 'flex';
                        roundDisplay.textContent = `Fordulók: ${Math.min(PUZZLES_PER_HOUR, allPuzzles.filter(p=>p.category !== 'Fődíj Feladvány').length)}/${Math.min(PUZZLES_PER_HOUR, allPuzzles.filter(p=>p.category !== 'Fődíj Feladvány').length)}`;
                        const date = new Date(hourId * 60 * 60 * 1000);
                        hourBlockDisplay.textContent = `Adás: ${date.getHours()}:00 órai blokk`;
                        
                        puzzleBoard.innerHTML = '<div style="text-align:center; font-size: 1.2rem; color: white; padding: 2rem; line-height: 1.5;">A stúdió jelenleg szünetet tart.<br>Várjuk vissza a következő adásban!</div>';
                        alphabetPanel.innerHTML = '';
                        spinButton.disabled = true;
                        solveButton.disabled = true;
                        bankOfferButton.style.display = 'none';
                        newGameButton.textContent = "Új adás keresése";
                        return;
                    }
                    localStorage.removeItem('lastPlayedHourId');
                    
                    hourlyPuzzleIndices = getHourlyPuzzles(random);
                    resetGameState(true);
                    
                    const currentWeekId = getWeekNumber(new Date());
                    const millionaireWeek = localStorage.getItem('millionaireUntilWeekId');
                     if (millionaireWeek && millionaireWeek === currentWeekId) {
                        gameState.isMillionaire = true;
                        document.body.classList.add('millionaire-active');
                    } else {
                        localStorage.removeItem('millionaireUntilWeekId');
                        document.body.classList.remove('millionaire-active');
                    }

                    gameState.totalRounds = hourlyPuzzleIndices.length;
                    gameState.puzzleHourId = hourId;
                    
                    if(gameState.totalRounds > 1) {
                        const goldenRoundNumber = Math.floor(random() * (gameState.totalRounds -1)) + 2; 
                        gameState.goldenPuzzleRounds = [goldenRoundNumber];
                    }

                } else {
                    resetGameState(false);
                }
                
                gameState.roundWinnings = 0;
                gameState.noMoreConsonants = false;
                gameState.currentBet = 0;
                bankOfferButton.style.display = 'none';

                if (gameState.currentRound > gameState.totalRounds) {
                     offerMainPrizeGame();
                     return;
                }

                const currentPuzzleData = allPuzzles[hourlyPuzzleIndices[gameState.currentRound - 1]];
                const puzzleString = currentPuzzleData.puzzle.toUpperCase();
                const uniqueLetters = [...new Set(puzzleString.replace(/\s/g, '').split(''))];
                gameState.luckyTiles = [];
                if (uniqueLetters.length > 3) {
                    const luckyLetterIndex = Math.floor(Math.random() * uniqueLetters.length);
                    const luckyLetter = uniqueLetters[luckyLetterIndex];
                    const bonuses = [{ type: 'cash', value: 2000 }, { type: 'vowel', value: 1 }];
                    const chosenBonus = bonuses[Math.floor(Math.random() * bonuses.length)];
                    gameState.luckyTiles.push({ letter: luckyLetter, bonusType: chosenBonus.type, value: chosenBonus.value });
                }
                
                if(isSunday){
                    if (gameState.playerScore <= 0 && isNewGame) {
                        puzzleBoard.innerHTML = '<div style="text-align:center; font-size: 1.2rem; color: white; padding: 2rem; line-height: 1.5;">Nincs pénz a Heti Kasszában a vasárnapi játékhoz.<br>Gyere vissza hétköznap gyűjteni!</div>';
                        alphabetPanel.innerHTML = '';
                        spinButton.disabled = true;
                        solveButton.disabled = true;
                        return;
                    }
                    const bet = await promptForBet();
                    gameState.currentBet = bet;
                    gameState.playerScore -= bet;
                }

                newGameButton.textContent = "Új Játék";
                drawWheel(gameState.currentRound);
                
                puzzleCategory.textContent = currentPuzzleData.category;
                 if (gameState.goldenPuzzleRounds.includes(gameState.currentRound)) {
                     puzzleCategory.textContent = "⭐ " + currentPuzzleData.category;
                     puzzleCategory.classList.add('golden');
                } else {
                     puzzleCategory.classList.remove('golden');
                }

                setupPuzzleBoard(puzzleBoard, currentPuzzleData);
                createAlphabetPanel();
                updateUI();
                
                if (isNewGame && isSunday) {
                    updateHostMessage(getRandomMessage('sunday_greeting'));
                } else if (gameState.goldenPuzzleRounds.includes(gameState.currentRound)) {
                     updateHostMessage(getRandomMessage('start_golden_round', {round: gameState.currentRound}));
                } else {
                     updateHostMessage(getRandomMessage(gameState.currentRound === 1 && isNewGame ? 'start_game' : 'start_round', {round: gameState.currentRound}));
                }
            }
            
            function offerMainPrizeGame() {
                updateHostMessage(getRandomMessage('offer_main_prize'), true);
                document.getElementById('main-prize-link').addEventListener('click', async () => {
                    try {
                        const confirmRisk = await showModal({
                            title: 'Biztosan kockáztat?',
                            text: `A Fődíj Játékban a teljes nyereményét, azaz <strong>${gameState.playerScore.toLocaleString('hu-HU')}&nbsp;Ft</strong>-ot teszi kockára a duplájáért. Ha nem sikerül, mindent elveszít! Vállalja?`,
                            confirmText: 'Vállalom!',
                            cancelText: 'Inkább nem'
                        });

                        if (confirmRisk) {
                            startMainPrizeGame();
                        } else {
                            gameWin();
                        }
                    } catch (e) {
                         gameWin();
                    }
                });
            }

            async function startMainPrizeGame() {
                 const mainPrizePuzzles = allPuzzles.filter(p => p.category === 'Fődíj Feladvány');
                 const mainPrizePuzzle = mainPrizePuzzles[gameState.puzzleHourId % mainPrizePuzzles.length];
                 
                 mainPrizeCategory.textContent = "A Mindent Eldöntő Fődíj Feladvány";
                 setupPuzzleBoard(mainPrizeBoard, mainPrizePuzzle);
                 mainPrizeModal.style.display = 'flex';
                 
                 const chosenLetters = [];
                 for(let i=0; i<5; i++){
                    let c = (await showModal({title: `Betűválasztás (${i+1}/5)`, text: "Kérem a(z) " + (i+1) + ". mássalhangzót:", showInput:true, inputType:'text', showCancel: false})).toUpperCase();
                     chosenLetters.push(c);
                 }
                 let v = (await showModal({title: 'Betűválasztás (1/1)', text: "Kérem az 1 magánhangzót:", showInput:true, inputType:'text', showCancel: false})).toUpperCase();
                 chosenLetters.push(v);
                 
                 mainPrizeGivenLetters.textContent = `A megadott betűk: ${chosenLetters.join(', ')}`;
                 chosenLetters.forEach(letter => {
                     mainPrizeBoard.querySelectorAll(`.puzzle-tile[data-letter="${letter}"]`).forEach(tile => tile.classList.add('revealed'));
                 });

                 let timeLeft = MAIN_PRIZE_TIME;
                 mainPrizeTimer.textContent = timeLeft;
                 mainPrizeTimer.classList.remove('timer-low');
                 
                 mainPrizeTimerInterval = setInterval(() => {
                     timeLeft--;
                     mainPrizeTimer.textContent = timeLeft;
                     if(timeLeft <= 10) mainPrizeTimer.classList.add('timer-low');
                     if(timeLeft <= 0) {
                        endMainPrizeGame(false);
                     }
                 }, 1000);
                 playSound('timer-sound', true);
            }
            
            function endMainPrizeGame(isWin) {
                clearInterval(mainPrizeTimerInterval);
                stopSound('timer-sound');
                mainPrizeSolveInput.disabled = true;
                mainPrizeConfirmBtn.disabled = true;

                if (isWin) {
                    gameState.playerScore *= 2;
                    mainPrizeTitle.textContent = "FŐDÍJ MEGVAN!";
                    updateHostMessage(getRandomMessage('main_prize_win', { score: gameState.playerScore.toLocaleString('hu-HU') }), true);
                } else {
                    gameState.playerScore = 0;
                    mainPrizeTitle.textContent = "SAJNOS NEM SIKERÜLT";
                    updateHostMessage(getRandomMessage('main_prize_lose'), true);
                }
                updateUI(); 
                setTimeout(() => {
                    mainPrizeModal.style.display = 'none';
                    gameWin(true);
                }, 5000);
            }

            mainPrizeConfirmBtn.addEventListener('click', () => {
                 const mainPrizePuzzles = allPuzzles.filter(p => p.category === 'Fődíj Feladvány');
                 const mainPrizePuzzle = mainPrizePuzzles[gameState.puzzleHourId % mainPrizePuzzles.length];
                 const attempt = mainPrizeSolveInput.value.toUpperCase().trim().replace(/\s+/g, ' ');
                 
                 if (attempt === mainPrizePuzzle.puzzle.toUpperCase()) {
                     endMainPrizeGame(true);
                 } else {
                     endMainPrizeGame(false);
                 }
            });


            function initializeGame() {
                resetGameState(true);
                if (isSunday) {
                    document.body.classList.add('sunday-special');
                    mainHudLabel.textContent = "Heti Kassza";
                } else {
                    mainHudLabel.textContent = "Teljes Nyeremény";
                }
                startRound(true);
            }
            
            spinButton.addEventListener('click', togglePowerMeter);
            solveButton.addEventListener('click', () => solvePuzzle(false));
            bankOfferButton.addEventListener('click', handleBankOffer);
            newGameButton.addEventListener('click', () => {
                location.reload(); 
            });

            initializeGame();
        });
    </script>
</body>
</html>
